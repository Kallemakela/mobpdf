(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&t(m)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Zt="modulepreload",e_=function(r){return"/"+r},xt={},Pt=function(e,n,t){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),w=m?.nonce||m?.getAttribute("nonce");i=Promise.allSettled(n.map(g=>{if(g=e_(g),g in xt)return;xt[g]=!0;const h=g.endsWith(".css"),N=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${N}`))return;const S=document.createElement("link");if(S.rel=h?"stylesheet":Zt,h||(S.as="script"),S.crossOrigin="",S.href=g,w&&S.setAttribute("nonce",w),document.head.appendChild(S),h)return new Promise((me,le)=>{S.addEventListener("load",me),S.addEventListener("error",()=>le(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(m){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=m,window.dispatchEvent(w),!w.defaultPrevented)throw m}return i.then(m=>{for(const w of m||[])w.status==="rejected"&&o(w.reason);return e().catch(o)})};var t_=async function(r={}){var e,n,t=r,i=new Promise((a,p)=>{e=a,n=p}),o=typeof window=="object",m=typeof WorkerGlobalScope<"u",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(w){const{createRequire:a}=await Pt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);var g=a(import.meta.url)}var h,N,S="./this.program",me=(a,p)=>{throw p},le=import.meta.url,be="";if(w){var Be=g("fs"),Ct=g("path");le.startsWith("file:")&&(be=Ct.dirname(g("url").fileURLToPath(le))+"/"),N=a=>(a=Me(a)?new URL(a):a,Be.readFileSync(a)),h=async(a,p=!0)=>(a=Me(a)?new URL(a):a,Be.readFileSync(a,p?void 0:"utf8")),process.argv.length>1&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),me=(a,p)=>{throw process.exitCode=a,p}}else if(o||m){try{be=new URL(".",le).href}catch{}m&&(N=a=>{var p=new XMLHttpRequest;return p.open("GET",a,!1),p.responseType="arraybuffer",p.send(null),new Uint8Array(p.response)}),h=async a=>{if(Me(a))return new Promise((l,f)=>{var u=new XMLHttpRequest;u.open("GET",a,!0),u.responseType="arraybuffer",u.onload=()=>{u.status==200||u.status==0&&u.response?l(u.response):f(u.status)},u.onerror=f,u.send(null)});var p=await fetch(a,{credentials:"same-origin"});if(p.ok)return p.arrayBuffer();throw new Error(p.status+" : "+p.url)}}var Fe,He,we,R,ie,Ve,rt,it=console.log.bind(console),ye=console.error.bind(console),Ye=!1,at=!1,Me=a=>a.startsWith("file://");function ot(){var a=He.buffer;t.HEAPU8=we=new Uint8Array(a),t.HEAP32=R=new Int32Array(a),t.HEAPU32=ie=new Uint32Array(a),t.HEAPF32=new Float32Array(a),rt=new Float64Array(a),Ve=new BigInt64Array(a),new BigUint64Array(a)}var Ke,ue=0,Se=null;function Rt(){return t.locateFile?(a="mupdf-wasm.wasm",t.locateFile?t.locateFile(a,be):be+a):new URL("/assets/mupdf-wasm-DGGPXobK.wasm",import.meta.url).href;var a}async function Bt(a){if(!Fe)try{var p=await h(a);return new Uint8Array(p)}catch{}return function(l){if(l==Ke&&Fe)return new Uint8Array(Fe);if(N)return N(l);throw"both async and sync fetching of the wasm failed"}(a)}async function Ht(a,p){try{var l=await Bt(a);return await WebAssembly.instantiate(l,p)}catch(f){ye(`failed to asynchronously prepare wasm: ${f}`),function(u){t.onAbort?.(u),ye(u="Aborted("+u+")"),Ye=!0,u+=". Build with -sASSERTIONS for more info.",at&&Xt();var c=new WebAssembly.RuntimeError(u);throw n(c),c}(f)}}class Mt{name="ExitStatus";constructor(p){this.message=`Program terminated with exit(${p})`,this.status=p}}var pt=a=>{for(;a.length>0;)a.shift()(t)},dt=[],jt=a=>dt.push(a),mt=[],Ut=a=>mt.push(a),lt=!0,ft=new TextDecoder,wt=(a,p)=>{if(!a)return"";for(var l=a+p,f=a;!(f>=l)&&we[f];)++f;return ft.decode(we.subarray(a,f))},$t=a=>a<-9007199254740992||a>9007199254740992?NaN:Number(a),Ee=(a,p,l)=>((f,u,c,y)=>{if(!(y>0))return 0;for(var A=c,V=c+y-1,xe=0;xe<f.length;++xe){var C=f.charCodeAt(xe);if(C>=55296&&C<=57343&&(C=65536+((1023&C)<<10)|1023&f.charCodeAt(++xe)),C<=127){if(c>=V)break;u[c++]=C}else if(C<=2047){if(c+1>=V)break;u[c++]=192|C>>6,u[c++]=128|63&C}else if(C<=65535){if(c+2>=V)break;u[c++]=224|C>>12,u[c++]=128|C>>6&63,u[c++]=128|63&C}else{if(c+3>=V)break;u[c++]=240|C>>18,u[c++]=128|C>>12&63,u[c++]=128|C>>6&63,u[c++]=128|63&C}}return u[c]=0,c-A})(a,we,p,l),ut=()=>Date.now(),qe=[],ct=(a,p,l)=>{var f=((u,c)=>{var y;for(qe.length=0;y=we[u++];){var A=y!=105;c+=(A&=y!=112)&&c%8?4:0,qe.push(y==112?ie[c>>2]:y==106?Ve[c>>3]:y==105?R[c>>2]:rt[c>>3]),c+=A?8:4}return qe})(p,l);return Kt[a](...f)},Gt=(a,p)=>Math.ceil(a/p)*p,zt=a=>{var p=(a-He.buffer.byteLength+65535)/65536|0;try{return He.grow(p),ot(),1}catch{}},Xe={},Le=()=>{if(!Le.strings){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"};for(var p in Xe)Xe[p]===void 0?delete a[p]:a[p]=Xe[p];var l=[];for(var p in a)l.push(`${p}=${a[p]}`);Le.strings=l}return Le.strings},ht=a=>{for(var p=0,l=0;l<a.length;++l){var f=a.charCodeAt(l);f<=127?p++:f<=2047?p+=2:f>=55296&&f<=57343?(p+=4,++l):p+=3}return p},Wt=a=>{lt||(t.onExit?.(a),Ye=!0),me(a,new Mt(a))},Jt=(a,p)=>{Wt(a)},Vt=[null,[],[]],Yt=(a,p)=>{var l=Vt[a];p===0||p===10?((a===1?it:ye)(((f,u=0,c=NaN)=>{for(var y=u+c,A=u;f[A]&&!(A>=y);)++A;return ft.decode(f.buffer?f.subarray(u,A):new Uint8Array(f.slice(u,A)))})(l)),l.length=0):l.push(p)};t.noExitRuntime&&(lt=t.noExitRuntime),t.print&&(it=t.print),t.printErr&&(ye=t.printErr),t.wasmBinary&&(Fe=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&(S=t.thisProgram),t.UTF8ToString=wt,t.stringToUTF8=Ee,t.lengthBytesUTF8=ht;var Kt={6016e3:()=>{throw"TRYLATER"},6016022:()=>{throw"ABORT"},6016041:a=>{throw new Error(wt(a))},6016080:()=>{throw new Error("Cannot create MuPDF context!")},6016133:(a,p,l,f,u,c,y)=>{globalThis.$libmupdf_text_walk.begin_span(a,p,l,f,u,c,y)},6016207:(a,p,l,f,u,c,y,A)=>{globalThis.$libmupdf_text_walk.show_glyph(a,p,l,f,u,c,y,A)},6016285:a=>{globalThis.$libmupdf_text_walk.end_span(a)},6016333:(a,p,l,f)=>globalThis.$libmupdf_load_font_file(a,p,l,f),6016396:(a,p,l,f)=>globalThis.$libmupdf_stm_read(a,p,l,f),6016454:a=>{globalThis.$libmupdf_stm_close(a)},6016494:(a,p,l,f)=>globalThis.$libmupdf_stm_seek(a,p,l,f),6016552:(a,p,l)=>{globalThis.$libmupdf_path_walk.moveto(a,p,l)},6016606:(a,p,l)=>{globalThis.$libmupdf_path_walk.lineto(a,p,l)},6016660:(a,p,l,f,u,c,y)=>{globalThis.$libmupdf_path_walk.curveto(a,p,l,f,u,c,y)},6016731:a=>{globalThis.$libmupdf_path_walk.closepath(a)},6016780:a=>{globalThis.$libmupdf_device.close_device(a)},6016829:a=>{globalThis.$libmupdf_device.drop_device(a)},6016877:(a,p,l,f,u,c,y,A)=>{globalThis.$libmupdf_device.fill_path(a,p,l,f,u,c,y,A)},6016951:(a,p,l,f,u,c,y,A)=>{globalThis.$libmupdf_device.stroke_path(a,p,l,f,u,c,y,A)},6017027:(a,p,l,f)=>{globalThis.$libmupdf_device.clip_path(a,p,l,f)},6017085:(a,p,l,f)=>{globalThis.$libmupdf_device.clip_stroke_path(a,p,l,f)},6017150:(a,p,l,f,u,c,y)=>{globalThis.$libmupdf_device.fill_text(a,p,l,f,u,c,y)},6017220:(a,p,l,f,u,c,y,A)=>{globalThis.$libmupdf_device.stroke_text(a,p,l,f,u,c,y,A)},6017296:(a,p,l)=>{globalThis.$libmupdf_device.clip_text(a,p,l)},6017350:(a,p,l,f)=>{globalThis.$libmupdf_device.clip_stroke_text(a,p,l,f)},6017415:(a,p,l)=>{globalThis.$libmupdf_device.ignore_text(a,p,l)},6017471:(a,p,l,f)=>{globalThis.$libmupdf_device.fill_shade(a,p,l,f)},6017530:(a,p,l,f)=>{globalThis.$libmupdf_device.fill_image(a,p,l,f)},6017589:(a,p,l,f,u,c,y)=>{globalThis.$libmupdf_device.fill_image_mask(a,p,l,f,u,c,y)},6017665:(a,p,l)=>{globalThis.$libmupdf_device.clip_image_mask(a,p,l)},6017725:a=>{globalThis.$libmupdf_device.pop_clip(a)},6017770:(a,p,l,f,u,c)=>{globalThis.$libmupdf_device.begin_mask(a,p,l,f,u,c)},6017837:(a,p)=>{globalThis.$libmupdf_device.end_mask(a,p)},6017886:(a,p,l,f,u,c,y)=>{globalThis.$libmupdf_device.begin_group(a,p,l,f,u,c,y)},6017958:a=>{globalThis.$libmupdf_device.end_group(a)},6018004:(a,p,l,f,u,c,y)=>globalThis.$libmupdf_device.begin_tile(a,p,l,f,u,c,y),6018082:a=>{globalThis.$libmupdf_device.end_tile(a)},6018127:(a,p)=>{globalThis.$libmupdf_device.begin_layer(a,p)},6018179:a=>{globalThis.$libmupdf_device.end_layer(a)}},qt={g:function(a,p,l){return 0},u:function(a,p){},t:function(a,p,l){return 0},f:function(a,p,l,f){},s:a=>{},e:(a,p,l)=>{},m:function(a,p){a=$t(a);var l=new Date(1e3*a);R[p>>2]=l.getUTCSeconds(),R[p+4>>2]=l.getUTCMinutes(),R[p+8>>2]=l.getUTCHours(),R[p+12>>2]=l.getUTCDate(),R[p+16>>2]=l.getUTCMonth(),R[p+20>>2]=l.getUTCFullYear()-1900,R[p+24>>2]=l.getUTCDay();var f=Date.UTC(l.getUTCFullYear(),0,1,0,0,0,0),u=(l.getTime()-f)/864e5|0;R[p+28>>2]=u},l:function(a){var p=(()=>{var l=Date.UTC(R[a+20>>2]+1900,R[a+16>>2],R[a+12>>2],R[a+8>>2],R[a+4>>2],R[a>>2],0),f=new Date(l);R[a+24>>2]=f.getUTCDay();var u=Date.UTC(f.getUTCFullYear(),0,1,0,0,0,0),c=(f.getTime()-u)/864e5|0;return R[a+28>>2]=c,f.getTime()/1e3})();return BigInt(p)},k:(a,p,l,f)=>{var u=new Date().getFullYear(),c=new Date(u,0,1),y=new Date(u,6,1),A=c.getTimezoneOffset(),V=y.getTimezoneOffset(),xe=Math.max(A,V);ie[a>>2]=60*xe,R[p>>2]=+(A!=V);var C=yt=>{var Qt=yt>=0?"-":"+",Et=Math.abs(yt);return`UTC${Qt}${String(Math.floor(Et/60)).padStart(2,"0")}${String(Et%60).padStart(2,"0")}`},gt=C(A),bt=C(V);V<A?(Ee(gt,l,17),Ee(bt,f,17)):(Ee(gt,f,17),Ee(bt,l,17))},r:function(a,p,l){if(!((f=a)>=0&&f<=3))return 28;var f,u;u=a===0?ut():performance.now();var c=Math.round(1e3*u*1e3);return Ve[l>>3]=BigInt(c),0},a:(a,p,l)=>ct(a,p,l),j:(a,p,l)=>ct(a,p,l),i:ut,h:a=>{var p=we.length,l=2147483648;if((a>>>=0)>l)return!1;for(var f=1;f<=4;f*=2){var u=p*(1+.2/f);u=Math.min(u,a+100663296);var c=Math.min(l,Gt(Math.max(a,u),65536));if(zt(c))return!0}return!1},q:(a,p)=>{var l=0,f=0;for(var u of Le()){var c=p+l;ie[a+f>>2]=c,l+=Ee(u,c,1/0)+1,f+=4}return 0},p:(a,p)=>{var l=Le();ie[a>>2]=l.length;var f=0;for(var u of l)f+=ht(u)+1;return ie[p>>2]=f,0},b:Jt,d:a=>52,o:(a,p,l,f)=>52,n:function(a,p,l,f){return 70},c:(a,p,l,f)=>{for(var u=0,c=0;c<l;c++){var y=ie[p>>2],A=ie[p+4>>2];p+=8;for(var V=0;V<A;V++)Yt(a,we[y+V]);u+=A}return ie[f>>2]=u,0}},s=await async function(){function a(f,u){return s=f.exports,He=s.v,ot(),function(){if(ue--,t.monitorRunDependencies?.(ue),ue==0&&Se){var c=Se;Se=null,c()}}(),s}ue++,t.monitorRunDependencies?.(ue);var p={a:qt};if(t.instantiateWasm)return new Promise((f,u)=>{t.instantiateWasm(p,(c,y)=>{f(a(c))})});Ke??=Rt();try{var l=function(f){return a(f.instance)}(await async function(f,u,c){if(!f&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(u)&&!w)try{var y=fetch(u,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(y,c)}catch(A){ye(`wasm streaming compile failed: ${A}`),ye("falling back to ArrayBuffer instantiation")}return Ht(u,c)}(Fe,Ke,p));return l}catch(f){return n(f),Promise.reject(f)}}(),Xt=(s.w,t._wasm_init_context=s.x,t._wasm_malloc=s.y,t._wasm_free=s.z,t._wasm_enable_icc=s.A,t._wasm_disable_icc=s.B,t._wasm_set_user_css=s.C,t._wasm_Memento_checkAllMemory=s.D,t._wasm_Memento_listBlocks=s.E,t._wasm_keep_buffer=s.F,t._wasm_drop_buffer=s.G,t._wasm_keep_stream=s.H,t._wasm_drop_stream=s.I,t._wasm_keep_colorspace=s.J,t._wasm_drop_colorspace=s.K,t._wasm_keep_pixmap=s.L,t._wasm_drop_pixmap=s.M,t._wasm_keep_font=s.N,t._wasm_drop_font=s.O,t._wasm_keep_stroke_state=s.P,t._wasm_drop_stroke_state=s.Q,t._wasm_keep_image=s.R,t._wasm_drop_image=s.S,t._wasm_keep_shade=s.T,t._wasm_drop_shade=s.U,t._wasm_keep_path=s.V,t._wasm_drop_path=s.W,t._wasm_keep_text=s.X,t._wasm_drop_text=s.Y,t._wasm_keep_device=s.Z,t._wasm_drop_device=s._,t._wasm_keep_display_list=s.$,t._wasm_drop_display_list=s.aa,t._wasm_drop_stext_page=s.ba,t._wasm_drop_document_writer=s.ca,t._wasm_drop_outline_iterator=s.da,t._wasm_keep_document=s.ea,t._wasm_drop_document=s.fa,t._wasm_keep_page=s.ga,t._wasm_drop_page=s.ha,t._wasm_keep_link=s.ia,t._wasm_drop_link=s.ja,t._wasm_keep_outline=s.ka,t._wasm_drop_outline=s.la,t._wasm_pdf_keep_annot=s.ma,t._wasm_pdf_drop_annot=s.na,t._wasm_pdf_keep_obj=s.oa,t._wasm_pdf_drop_obj=s.pa,t._wasm_pdf_keep_graft_map=s.qa,t._wasm_pdf_drop_graft_map=s.ra,t._wasm_buffer_get_data=s.sa,t._wasm_buffer_get_len=s.ta,t._wasm_colorspace_get_type=s.ua,t._wasm_colorspace_get_n=s.va,t._wasm_colorspace_get_name=s.wa,t._wasm_pixmap_get_w=s.xa,t._wasm_pixmap_get_h=s.ya,t._wasm_pixmap_get_x=s.za,t._wasm_pixmap_get_y=s.Aa,t._wasm_pixmap_get_n=s.Ba,t._wasm_pixmap_get_stride=s.Ca,t._wasm_pixmap_get_alpha=s.Da,t._wasm_pixmap_get_xres=s.Ea,t._wasm_pixmap_get_yres=s.Fa,t._wasm_pixmap_get_colorspace=s.Ga,t._wasm_pixmap_get_samples=s.Ha,t._wasm_pixmap_set_xres=s.Ia,t._wasm_pixmap_set_yres=s.Ja,t._wasm_font_get_name=s.Ka,t._wasm_stroke_state_get_start_cap=s.La,t._wasm_stroke_state_set_start_cap=s.Ma,t._wasm_stroke_state_get_dash_cap=s.Na,t._wasm_stroke_state_set_dash_cap=s.Oa,t._wasm_stroke_state_get_end_cap=s.Pa,t._wasm_stroke_state_set_end_cap=s.Qa,t._wasm_stroke_state_get_linejoin=s.Ra,t._wasm_stroke_state_set_linejoin=s.Sa,t._wasm_stroke_state_get_linewidth=s.Ta,t._wasm_stroke_state_set_linewidth=s.Ua,t._wasm_stroke_state_get_miterlimit=s.Va,t._wasm_stroke_state_set_miterlimit=s.Wa,t._wasm_stroke_state_get_dash_phase=s.Xa,t._wasm_stroke_state_set_dash_phase=s.Ya,t._wasm_stroke_state_get_dash_len=s.Za,t._wasm_image_get_w=s._a,t._wasm_image_get_h=s.$a,t._wasm_image_get_n=s.ab,t._wasm_image_get_bpc=s.bb,t._wasm_image_get_xres=s.cb,t._wasm_image_get_yres=s.db,t._wasm_image_get_imagemask=s.eb,t._wasm_image_get_colorspace=s.fb,t._wasm_image_get_mask=s.gb,t._wasm_outline_get_title=s.hb,t._wasm_outline_get_uri=s.ib,t._wasm_outline_get_next=s.jb,t._wasm_outline_get_down=s.kb,t._wasm_outline_get_is_open=s.lb,t._wasm_outline_item_get_title=s.mb,t._wasm_outline_item_get_uri=s.nb,t._wasm_outline_item_get_is_open=s.ob,t._wasm_link_get_rect=s.pb,t._wasm_link_get_uri=s.qb,t._wasm_link_get_next=s.rb,t._wasm_stext_page_get_mediabox=s.sb,t._wasm_stext_page_get_first_block=s.tb,t._wasm_stext_block_get_next=s.ub,t._wasm_stext_block_get_type=s.vb,t._wasm_stext_block_get_bbox=s.wb,t._wasm_stext_block_get_first_line=s.xb,t._wasm_stext_block_get_transform=s.yb,t._wasm_stext_block_get_image=s.zb,t._wasm_stext_line_get_next=s.Ab,t._wasm_stext_line_get_wmode=s.Bb,t._wasm_stext_line_get_dir=s.Cb,t._wasm_stext_line_get_bbox=s.Db,t._wasm_stext_line_get_first_char=s.Eb,t._wasm_stext_char_get_next=s.Fb,t._wasm_stext_char_get_c=s.Gb,t._wasm_stext_char_get_origin=s.Hb,t._wasm_stext_char_get_quad=s.Ib,t._wasm_stext_char_get_size=s.Jb,t._wasm_stext_char_get_font=s.Kb,t._wasm_stext_char_get_argb=s.Lb,t._wasm_link_dest_get_chapter=s.Mb,t._wasm_link_dest_get_page=s.Nb,t._wasm_link_dest_get_type=s.Ob,t._wasm_link_dest_get_x=s.Pb,t._wasm_link_dest_get_y=s.Qb,t._wasm_link_dest_get_w=s.Rb,t._wasm_link_dest_get_h=s.Sb,t._wasm_link_dest_get_zoom=s.Tb,t._wasm_pdf_filespec_params_get_filename=s.Ub,t._wasm_pdf_filespec_params_get_mimetype=s.Vb,t._wasm_pdf_filespec_params_get_size=s.Wb,t._wasm_pdf_filespec_params_get_created=s.Xb,t._wasm_pdf_filespec_params_get_modified=s.Yb,t._wasm_pdf_page_get_obj=s.Zb,t._wasm_new_buffer=s._b,t._wasm_new_buffer_from_data=s.$b,t._wasm_append_string=s.ac,t._wasm_append_byte=s.bc,t._wasm_append_buffer=s.cc,t._wasm_slice_buffer=s.dc,t._wasm_string_from_buffer=s.ec,t._wasm_device_gray=s.fc,t._wasm_device_rgb=s.gc,t._wasm_device_bgr=s.hc,t._wasm_device_cmyk=s.ic,t._wasm_device_lab=s.jc,t._wasm_new_icc_colorspace=s.kc,t._wasm_new_stroke_state=s.lc,t._wasm_stroke_state_get_dash_item=s.mc,t._wasm_stroke_state_set_dash_item=s.nc,t._wasm_new_base14_font=s.oc,t._wasm_new_cjk_font=s.pc,t._wasm_new_font_from_buffer=s.qc,t._wasm_encode_character=s.rc,t._wasm_advance_glyph=s.sc,t._wasm_font_is_monospaced=s.tc,t._wasm_font_is_serif=s.uc,t._wasm_font_is_bold=s.vc,t._wasm_font_is_italic=s.wc,t._wasm_new_image_from_pixmap=s.xc,t._wasm_new_image_from_buffer=s.yc,t._wasm_get_pixmap_from_image=s.zc,t._wasm_new_pixmap_from_page=s.Ac,t._wasm_new_pixmap_from_page_contents=s.Bc,t._wasm_pdf_new_pixmap_from_page_with_usage=s.Cc,t._wasm_pdf_new_pixmap_from_page_contents_with_usage=s.Dc,t._wasm_new_pixmap_with_bbox=s.Ec,t._wasm_clear_pixmap=s.Fc,t._wasm_clear_pixmap_with_value=s.Gc,t._wasm_invert_pixmap=s.Hc,t._wasm_invert_pixmap_luminance=s.Ic,t._wasm_gamma_pixmap=s.Jc,t._wasm_tint_pixmap=s.Kc,t._wasm_new_buffer_from_pixmap_as_png=s.Lc,t._wasm_new_buffer_from_pixmap_as_pam=s.Mc,t._wasm_new_buffer_from_pixmap_as_psd=s.Nc,t._wasm_new_buffer_from_pixmap_as_jpeg=s.Oc,t._wasm_convert_pixmap=s.Pc,t._wasm_warp_pixmap=s.Qc,t._wasm_bound_shade=s.Rc,t._wasm_new_display_list=s.Sc,t._wasm_bound_display_list=s.Tc,t._wasm_run_display_list=s.Uc,t._wasm_new_pixmap_from_display_list=s.Vc,t._wasm_new_stext_page_from_display_list=s.Wc,t._wasm_search_display_list=s.Xc,t._wasm_new_path=s.Yc,t._wasm_moveto=s.Zc,t._wasm_lineto=s._c,t._wasm_curveto=s.$c,t._wasm_curvetov=s.ad,t._wasm_curvetoy=s.bd,t._wasm_closepath=s.cd,t._wasm_rectto=s.dd,t._wasm_transform_path=s.ed,t._wasm_bound_path=s.fd,t._wasm_new_text=s.gd,t._wasm_bound_text=s.hd,t._wasm_show_glyph=s.id,t._wasm_show_string=s.jd,t._wasm_new_draw_device=s.kd,t._wasm_new_display_list_device=s.ld,t._wasm_close_device=s.md,t._wasm_fill_path=s.nd,t._wasm_stroke_path=s.od,t._wasm_clip_path=s.pd,t._wasm_clip_stroke_path=s.qd,t._wasm_fill_text=s.rd,t._wasm_stroke_text=s.sd,t._wasm_clip_text=s.td,t._wasm_clip_stroke_text=s.ud,t._wasm_ignore_text=s.vd,t._wasm_fill_shade=s.wd,t._wasm_fill_image=s.xd,t._wasm_fill_image_mask=s.yd,t._wasm_clip_image_mask=s.zd,t._wasm_pop_clip=s.Ad,t._wasm_begin_mask=s.Bd,t._wasm_end_mask=s.Cd,t._wasm_begin_group=s.Dd,t._wasm_end_group=s.Ed,t._wasm_begin_tile=s.Fd,t._wasm_end_tile=s.Gd,t._wasm_begin_layer=s.Hd,t._wasm_end_layer=s.Id,t._wasm_new_document_writer_with_buffer=s.Jd,t._wasm_begin_page=s.Kd,t._wasm_end_page=s.Ld,t._wasm_close_document_writer=s.Md,t._wasm_print_stext_page_as_json=s.Nd,t._wasm_search_stext_page=s.Od,t._wasm_snap_selection=s.Pd,t._wasm_copy_selection=s.Qd,t._wasm_highlight_selection=s.Rd,t._wasm_print_stext_page_as_html=s.Sd,t._wasm_print_stext_page_as_text=s.Td,t._wasm_open_document_with_buffer=s.Ud,t._wasm_open_document_with_stream=s.Vd,t._wasm_format_link_uri=s.Wd,t._wasm_needs_password=s.Xd,t._wasm_authenticate_password=s.Yd,t._wasm_has_permission=s.Zd,t._wasm_count_pages=s._d,t._wasm_load_page=s.$d,t._wasm_lookup_metadata=s.ae,t._wasm_set_metadata=s.be,t._wasm_resolve_link=s.ce,t._wasm_resolve_link_dest=s.de,t._wasm_load_outline=s.ee,t._wasm_outline_get_page=s.fe,t._wasm_layout_document=s.ge,t._wasm_is_document_reflowable=s.he,t._wasm_link_set_rect=s.ie,t._wasm_link_set_uri=s.je,t._wasm_bound_page=s.ke,t._wasm_load_links=s.le,t._wasm_create_link=s.me,t._wasm_delete_link=s.ne,t._wasm_run_page=s.oe,t._wasm_run_page_contents=s.pe,t._wasm_run_page_annots=s.qe,t._wasm_run_page_widgets=s.re,t._wasm_new_stext_page_from_page=s.se,t._wasm_new_display_list_from_page=s.te,t._wasm_new_display_list_from_page_contents=s.ue,t._wasm_page_label=s.ve,t._wasm_search_page=s.we,t._wasm_new_outline_iterator=s.xe,t._wasm_outline_iterator_next=s.ye,t._wasm_outline_iterator_prev=s.ze,t._wasm_outline_iterator_up=s.Ae,t._wasm_outline_iterator_down=s.Be,t._wasm_outline_iterator_delete=s.Ce,t._wasm_outline_iterator_item=s.De,t._wasm_outline_iterator_insert=s.Ee,t._wasm_outline_iterator_update=s.Fe,t._wasm_pdf_document_from_fz_document=s.Ge,t._wasm_pdf_page_from_fz_page=s.He,t._wasm_pdf_create_document=s.Ie,t._wasm_pdf_version=s.Je,t._wasm_pdf_was_repaired=s.Ke,t._wasm_pdf_has_unsaved_changes=s.Le,t._wasm_pdf_can_be_saved_incrementally=s.Me,t._wasm_pdf_count_versions=s.Ne,t._wasm_pdf_count_unsaved_versions=s.Oe,t._wasm_pdf_validate_change_history=s.Pe,t._wasm_pdf_enable_journal=s.Qe,t._wasm_pdf_undoredo_state_position=s.Re,t._wasm_pdf_undoredo_state_count=s.Se,t._wasm_pdf_undoredo_step=s.Te,t._wasm_pdf_begin_operation=s.Ue,t._wasm_pdf_begin_implicit_operation=s.Ve,t._wasm_pdf_end_operation=s.We,t._wasm_pdf_abandon_operation=s.Xe,t._wasm_pdf_undo=s.Ye,t._wasm_pdf_redo=s.Ze,t._wasm_pdf_can_undo=s._e,t._wasm_pdf_can_redo=s.$e,t._wasm_pdf_document_language=s.af,t._wasm_pdf_set_document_language=s.bf,t._wasm_pdf_trailer=s.cf,t._wasm_pdf_xref_len=s.df,t._wasm_pdf_lookup_page_obj=s.ef,t._wasm_pdf_add_object=s.ff,t._wasm_pdf_create_object=s.gf,t._wasm_pdf_delete_object=s.hf,t._wasm_pdf_add_stream=s.jf,t._wasm_pdf_add_simple_font=s.kf,t._wasm_pdf_add_cjk_font=s.lf,t._wasm_pdf_add_cid_font=s.mf,t._wasm_pdf_add_image=s.nf,t._wasm_pdf_load_image=s.of,t._wasm_pdf_add_page=s.pf,t._wasm_pdf_insert_page=s.qf,t._wasm_pdf_delete_page=s.rf,t._wasm_pdf_set_page_labels=s.sf,t._wasm_pdf_delete_page_labels=s.tf,t._wasm_pdf_is_embedded_file=s.uf,t._wasm_pdf_get_filespec_params=s.vf,t._wasm_pdf_add_embedded_file=s.wf,t._wasm_pdf_load_embedded_file_contents=s.xf,t._wasm_pdf_write_document_buffer=s.yf,t._wasm_pdf_js_supported=s.zf,t._wasm_pdf_enable_js=s.Af,t._wasm_pdf_disable_js=s.Bf,t._wasm_pdf_rearrange_pages=s.Cf,t._wasm_pdf_subset_fonts=s.Df,t._wasm_pdf_bake_document=s.Ef,t._wasm_pdf_count_layers=s.Ff,t._wasm_pdf_layer_name=s.Gf,t._wasm_pdf_layer_is_enabled=s.Hf,t._wasm_pdf_enable_layer=s.If,t._wasm_pdf_page_transform=s.Jf,t._wasm_pdf_set_page_box=s.Kf,t._wasm_pdf_first_annot=s.Lf,t._wasm_pdf_next_annot=s.Mf,t._wasm_pdf_first_widget=s.Nf,t._wasm_pdf_next_widget=s.Of,t._wasm_pdf_create_annot=s.Pf,t._wasm_pdf_delete_annot=s.Qf,t._wasm_pdf_update_page=s.Rf,t._wasm_pdf_redact_page=s.Sf,t._wasm_pdf_new_graft_map=s.Tf,t._wasm_pdf_graft_mapped_object=s.Uf,t._wasm_pdf_graft_object=s.Vf,t._wasm_pdf_graft_mapped_page=s.Wf,t._wasm_pdf_graft_page=s.Xf,t._wasm_pdf_bound_annot=s.Yf,t._wasm_pdf_run_annot=s.Zf,t._wasm_pdf_new_pixmap_from_annot=s._f,t._wasm_pdf_new_display_list_from_annot=s.$f,t._wasm_pdf_update_annot=s.ag,t._wasm_pdf_annot_obj=s.bg,t._wasm_pdf_annot_type=s.cg,t._wasm_pdf_annot_flags=s.dg,t._wasm_pdf_set_annot_flags=s.eg,t._wasm_pdf_annot_contents=s.fg,t._wasm_pdf_set_annot_contents=s.gg,t._wasm_pdf_annot_author=s.hg,t._wasm_pdf_set_annot_author=s.ig,t._wasm_pdf_annot_creation_date=s.jg,t._wasm_pdf_set_annot_creation_date=s.kg,t._wasm_pdf_annot_modification_date=s.lg,t._wasm_pdf_set_annot_modification_date=s.mg,t._wasm_pdf_annot_border_width=s.ng,t._wasm_pdf_set_annot_border_width=s.og,t._wasm_pdf_annot_border_style=s.pg,t._wasm_pdf_set_annot_border_style=s.qg,t._wasm_pdf_annot_border_effect=s.rg,t._wasm_pdf_set_annot_border_effect=s.sg,t._wasm_pdf_annot_border_effect_intensity=s.tg,t._wasm_pdf_set_annot_border_effect_intensity=s.ug,t._wasm_pdf_annot_opacity=s.vg,t._wasm_pdf_set_annot_opacity=s.wg,t._wasm_pdf_annot_filespec=s.xg,t._wasm_pdf_set_annot_filespec=s.yg,t._wasm_pdf_annot_quadding=s.zg,t._wasm_pdf_set_annot_quadding=s.Ag,t._wasm_pdf_annot_is_open=s.Bg,t._wasm_pdf_set_annot_is_open=s.Cg,t._wasm_pdf_annot_hidden_for_editing=s.Dg,t._wasm_pdf_set_annot_hidden_for_editing=s.Eg,t._wasm_pdf_annot_icon_name=s.Fg,t._wasm_pdf_set_annot_icon_name=s.Gg,t._wasm_pdf_annot_intent=s.Hg,t._wasm_pdf_set_annot_intent=s.Ig,t._wasm_pdf_annot_callout_style=s.Jg,t._wasm_pdf_set_annot_callout_style=s.Kg,t._wasm_pdf_annot_line_leader=s.Lg,t._wasm_pdf_set_annot_line_leader=s.Mg,t._wasm_pdf_annot_line_leader_extension=s.Ng,t._wasm_pdf_set_annot_line_leader_extension=s.Og,t._wasm_pdf_annot_line_leader_offset=s.Pg,t._wasm_pdf_set_annot_line_leader_offset=s.Qg,t._wasm_pdf_annot_line_caption=s.Rg,t._wasm_pdf_set_annot_line_caption=s.Sg,t._wasm_pdf_annot_rich_defaults=s.Tg,t._wasm_pdf_set_annot_rich_defaults=s.Ug,t._wasm_pdf_annot_callout_point=s.Vg,t._wasm_pdf_annot_line_caption_offset=s.Wg,t._wasm_pdf_annot_rect=s.Xg,t._wasm_pdf_annot_popup=s.Yg,t._wasm_pdf_annot_quad_point_count=s.Zg,t._wasm_pdf_annot_quad_point=s._g,t._wasm_pdf_annot_vertex_count=s.$g,t._wasm_pdf_annot_vertex=s.ah,t._wasm_pdf_annot_ink_list_count=s.bh,t._wasm_pdf_annot_ink_list_stroke_count=s.ch,t._wasm_pdf_annot_ink_list_stroke_vertex=s.dh,t._wasm_pdf_annot_rich_contents=s.eh,t._wasm_pdf_annot_border_dash_count=s.fh,t._wasm_pdf_annot_border_dash_item=s.gh,t._wasm_pdf_annot_has_rect=s.hh,t._wasm_pdf_annot_has_ink_list=s.ih,t._wasm_pdf_annot_has_quad_points=s.jh,t._wasm_pdf_annot_has_vertices=s.kh,t._wasm_pdf_annot_has_line=s.lh,t._wasm_pdf_annot_has_interior_color=s.mh,t._wasm_pdf_annot_has_line_ending_styles=s.nh,t._wasm_pdf_annot_has_border=s.oh,t._wasm_pdf_annot_has_border_effect=s.ph,t._wasm_pdf_annot_has_icon_name=s.qh,t._wasm_pdf_annot_has_open=s.rh,t._wasm_pdf_annot_has_author=s.sh,t._wasm_pdf_annot_has_filespec=s.th,t._wasm_pdf_annot_has_callout=s.uh,t._wasm_pdf_annot_has_rich_contents=s.vh,t._wasm_pdf_annot_language=s.wh,t._wasm_pdf_set_annot_language=s.xh,t._wasm_pdf_set_annot_popup=s.yh,t._wasm_pdf_set_annot_rect=s.zh,t._wasm_pdf_clear_annot_quad_points=s.Ah,t._wasm_pdf_clear_annot_vertices=s.Bh,t._wasm_pdf_clear_annot_ink_list=s.Ch,t._wasm_pdf_clear_annot_border_dash=s.Dh,t._wasm_pdf_add_annot_quad_point=s.Eh,t._wasm_pdf_add_annot_vertex=s.Fh,t._wasm_pdf_add_annot_ink_list_stroke=s.Gh,t._wasm_pdf_add_annot_ink_list_stroke_vertex=s.Hh,t._wasm_pdf_add_annot_border_dash_item=s.Ih,t._wasm_pdf_annot_line_ending_styles_start=s.Jh,t._wasm_pdf_annot_line_1=s.Kh,t._wasm_pdf_annot_line_2=s.Lh,t._wasm_pdf_set_annot_line=s.Mh,t._wasm_pdf_set_annot_callout_point=s.Nh,t._wasm_pdf_annot_callout_line=s.Oh,t._wasm_pdf_set_annot_callout_line=s.Ph,t._wasm_pdf_set_annot_line_caption_offset=s.Qh,t._wasm_pdf_annot_line_ending_styles_end=s.Rh,t._wasm_pdf_set_annot_line_ending_styles=s.Sh,t._wasm_pdf_annot_color=s.Th,t._wasm_pdf_annot_interior_color=s.Uh,t._wasm_pdf_set_annot_color=s.Vh,t._wasm_pdf_set_annot_interior_color=s.Wh,t._wasm_pdf_set_annot_default_appearance=s.Xh,t._wasm_pdf_annot_default_appearance_font=s.Yh,t._wasm_pdf_annot_default_appearance_size=s.Zh,t._wasm_pdf_annot_default_appearance_color=s._h,t._wasm_pdf_set_annot_rich_contents=s.$h,t._wasm_pdf_set_annot_stamp_image=s.ai,t._wasm_pdf_set_annot_appearance_from_display_list=s.bi,t._wasm_pdf_set_annot_appearance=s.ci,t._wasm_pdf_apply_redaction=s.di,t._wasm_pdf_reset_form=s.ei,t._wasm_pdf_annot_field_type=s.fi,t._wasm_pdf_annot_field_flags=s.gi,t._wasm_pdf_annot_field_label=s.hi,t._wasm_pdf_annot_field_value=s.ii,t._wasm_pdf_load_field_name=s.ji,t._wasm_pdf_annot_text_widget_max_len=s.ki,t._wasm_pdf_set_annot_text_field_value=s.li,t._wasm_pdf_set_annot_choice_field_value=s.mi,t._wasm_pdf_annot_choice_field_option_count=s.ni,t._wasm_pdf_annot_choice_field_option=s.oi,t._wasm_pdf_toggle_widget=s.pi,t._wasm_pdf_is_indirect=s.qi,t._wasm_pdf_is_bool=s.ri,t._wasm_pdf_is_int=s.si,t._wasm_pdf_is_real=s.ti,t._wasm_pdf_is_number=s.ui,t._wasm_pdf_is_name=s.vi,t._wasm_pdf_is_string=s.wi,t._wasm_pdf_is_array=s.xi,t._wasm_pdf_is_dict=s.yi,t._wasm_pdf_is_stream=s.zi,t._wasm_pdf_to_num=s.Ai,t._wasm_pdf_to_bool=s.Bi,t._wasm_pdf_to_real=s.Ci,t._wasm_pdf_to_name=s.Di,t._wasm_pdf_to_text_string=s.Ei,t._wasm_pdf_new_indirect=s.Fi,t._wasm_pdf_new_array=s.Gi,t._wasm_pdf_new_dict=s.Hi,t._wasm_pdf_new_bool=s.Ii,t._wasm_pdf_new_int=s.Ji,t._wasm_pdf_new_real=s.Ki,t._wasm_pdf_new_name=s.Li,t._wasm_pdf_new_text_string=s.Mi,t._wasm_pdf_new_string=s.Ni,t._wasm_pdf_resolve_indirect=s.Oi,t._wasm_pdf_array_len=s.Pi,t._wasm_pdf_array_get=s.Qi,t._wasm_pdf_dict_get=s.Ri,t._wasm_pdf_dict_len=s.Si,t._wasm_pdf_dict_get_key=s.Ti,t._wasm_pdf_dict_get_val=s.Ui,t._wasm_pdf_dict_get_inheritable=s.Vi,t._wasm_pdf_dict_gets=s.Wi,t._wasm_pdf_dict_gets_inheritable=s.Xi,t._wasm_pdf_dict_put=s.Yi,t._wasm_pdf_dict_puts=s.Zi,t._wasm_pdf_dict_del=s._i,t._wasm_pdf_dict_dels=s.$i,t._wasm_pdf_array_put=s.aj,t._wasm_pdf_array_push=s.bj,t._wasm_pdf_array_delete=s.cj,t._wasm_pdf_sprint_obj=s.dj,t._wasm_pdf_load_stream=s.ej,t._wasm_pdf_load_raw_stream=s.fj,t._wasm_pdf_update_object=s.gj,t._wasm_pdf_update_stream=s.hj,t._wasm_pdf_to_string=s.ij,t._wasm_new_stream=s.jj,t._wasm_walk_path=s.kj,t._wasm_walk_text=s.lj,t._wasm_new_js_device=s.mj,s.nj);return function(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()}(),function a(){function p(){t.calledRun=!0,Ye||(at=!0,s.w(),e(t),t.onRuntimeInitialized?.(),function(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)jt(t.postRun.shift());pt(dt)}())}ue>0?Se=a:(function(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Ut(t.preRun.shift());pt(mt)}(),ue>0?Se=a:t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),p()},1)):p())}(),i},Y=null;typeof process<"u"&&process.versions&&process.versions.node&&(Y=await Pt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]));const _=await t_(globalThis.$libmupdf_wasm_Module);_._wasm_init_context();function J(r){return _._wasm_malloc(r)}function ge(r){_._wasm_free(r)}const Tt=J(4),U=J(4*6)>>2,se=J(4*8)>>2,ce=J(4*6)>>2,H=J(4*4)>>2,ae=J(4*8)>>2,je=[0,0];function d(r,e){if(typeof e=="string"&&typeof r!==e)throw new TypeError("expected "+e);if(typeof e=="function"&&!(r instanceof e))throw new TypeError("expected "+e.name)}function Ue(r){if(!Array.isArray(r)||r.length!==2)throw new TypeError("expected point")}function $(r){if(!Array.isArray(r)||r.length!==4)throw new TypeError("expected rectangle")}function k(r){if(!Array.isArray(r)||r.length!==6)throw new TypeError("expected matrix")}function Ft(r){if(!Array.isArray(r)||r.length!==8)throw new TypeError("expected quad")}function Te(r){if(!Array.isArray(r)||r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function Qe(r){if(!Array.isArray(r)||r.length!==0&&r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function X(r){if(r instanceof ee)return r.pointer;if(r instanceof ArrayBuffer||r instanceof Uint8Array)return new ee(r).pointer;if(typeof r=="string")return new ee(r).pointer;throw new TypeError("expected buffer")}function M(r,e){if(typeof r=="number"&&r>=0&&r<e.length)return r;if(typeof r=="string"){let n=e.indexOf(r);if(n>=0)return n}throw new TypeError(`invalid enum value ("${r}"; expected ${e.join(", ")})`)}function __(r){var e=_.lengthBytesUTF8(r)+1,n=J(e);return _.stringToUTF8(r,n,e),n}function We(r,e){return je[e]&&(ge(je[e]),je[e]=0),je[e]=__(r)}function b(r){return We(r,0)}function Je(r){return We(r,1)}function Ne(r){return typeof r=="string"?We(r,0):0}function Ge(r){return typeof r=="string"?We(r,1):0}function oe(r){return _.HEAPF32[U+0]=r[0],_.HEAPF32[U+1]=r[1],U<<2}function Ie(r){return _.HEAPF32[U+2]=r[0],_.HEAPF32[U+3]=r[1],U+2<<2}function n_(r){return _.HEAPF32[U+4]=r[0],_.HEAPF32[U+5]=r[1],U+4<<2}function W(r){return _.HEAPF32[se+0]=r[0],_.HEAPF32[se+1]=r[1],_.HEAPF32[se+2]=r[2],_.HEAPF32[se+3]=r[3],se<<2}function s_(r){return _.HEAPF32[se+4]=r[0],_.HEAPF32[se+5]=r[1],_.HEAPF32[se+6]=r[2],_.HEAPF32[se+7]=r[3],se+4<<2}function T(r){return _.HEAPF32[ce+0]=r[0],_.HEAPF32[ce+1]=r[1],_.HEAPF32[ce+2]=r[2],_.HEAPF32[ce+3]=r[3],_.HEAPF32[ce+4]=r[4],_.HEAPF32[ce+5]=r[5],ce<<2}function St(r){return _.HEAPF32[ae+0]=r[0],_.HEAPF32[ae+1]=r[1],_.HEAPF32[ae+2]=r[2],_.HEAPF32[ae+3]=r[3],_.HEAPF32[ae+4]=r[4],_.HEAPF32[ae+5]=r[5],_.HEAPF32[ae+6]=r[6],_.HEAPF32[ae+7]=r[7],ae<<2}function q(r){if(typeof r<"u")switch(r.length){case 0:break;case 1:_.HEAPF32[H+0]=r[0];break;case 3:_.HEAPF32[H+0]=r[0],_.HEAPF32[H+1]=r[1],_.HEAPF32[H+2]=r[2];break;case 4:_.HEAPF32[H+0]=r[0],_.HEAPF32[H+1]=r[1],_.HEAPF32[H+2]=r[2],_.HEAPF32[H+3]=r[3];break}return H<<2}function r_(r){if(r===1)return[_.HEAPF32[H]];if(r===3)return[_.HEAPF32[H+0],_.HEAPF32[H+1],_.HEAPF32[H+2]];if(r===4)return[_.HEAPF32[H+0],_.HEAPF32[H+1],_.HEAPF32[H+2],_.HEAPF32[H+3]];throw new TypeError("invalid number of components for Color: "+r)}function Ze(r){return r===0?[]:r_(r)}function ke(r,e){let n=e>>2,t=[];for(let i=0;i<r;++i)t.push(_.HEAPF32[n+i]);return t}function Lt(r){return r===0?null:_.UTF8ToString(r)}function v(r){return _.UTF8ToString(r)}function he(r){let e=_.UTF8ToString(r);return ge(r),e}function K(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1]]}function G(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1],_.HEAPF32[e+2],_.HEAPF32[e+3]]}function B(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1],_.HEAPF32[e+2],_.HEAPF32[e+3],_.HEAPF32[e+4],_.HEAPF32[e+5]]}function De(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1],_.HEAPF32[e+2],_.HEAPF32[e+3],_.HEAPF32[e+4],_.HEAPF32[e+5],_.HEAPF32[e+6],_.HEAPF32[e+7]]}function $e(r){let e=_._wasm_buffer_get_data(r),n=_._wasm_buffer_get_len(r);return _.HEAPU8.slice(e,e+n)}function i_(r){var e=r>>16&255,n=r>>8&255,t=r&255;return[e/255,n/255,t/255]}function tt(r,e,n,t=500){d(n,"string");let i=0,o=0;try{i=J(32*t),o=J(4*t);let m=r(e,b(n),o,i,t),w=[];if(m>0){let g=[];for(let h=0;h<m;++h){let N=_.HEAP32[(o>>2)+h],S=De(i+h*32);h>0&&N&&(w.push(g),g=[]),g.push(S)}w.push(g)}return w}finally{ge(o),ge(i)}}class O{constructor(e){if(typeof e!="number")throw new Error("invalid pointer: "+typeof e);if(e!==0){let n=this.constructor;n._finalizer||(n._finalizer=new FinalizationRegistry(n._drop)),n._finalizer.register(this,e,this)}this.pointer=e}destroy(){if(this.pointer!==0){let e=this.constructor;e._finalizer.unregister(this),e._drop(this.pointer)}this.pointer=0}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}toString(){return`[${this.constructor.name} ${this.pointer}]`}valueOf(){throw new Error("cannot convert Userdata to Javascript value")}}class ee extends O{constructor(e){if(typeof e>"u")super(_._wasm_new_buffer(1024));else if(typeof e=="number")super(e);else if(typeof e=="string"){let n=_.lengthBytesUTF8(e),t=J(n+1);_.stringToUTF8(e,t,n+1),super(_._wasm_new_buffer_from_data(t,n))}else if(e instanceof ArrayBuffer||e instanceof Uint8Array){let n=e.byteLength,t=J(n);_.HEAPU8.set(new Uint8Array(e),t),super(_._wasm_new_buffer_from_data(t,n))}}get length(){return this.getLength()}set length(e){throw new TypeError("buffer length is read-only")}getLength(){return _._wasm_buffer_get_len(this.pointer)}readByte(e){let n=_._wasm_buffer_get_data(this.pointer);return _.HEAPU8[n+e]}write(e){_._wasm_append_string(this.pointer,b(e))}writeByte(e){_._wasm_append_byte(this.pointer,e)}writeLine(e){this.write(e),this.writeByte(10)}writeBuffer(e){_._wasm_append_buffer(this.pointer,X(e))}asUint8Array(){let e=_._wasm_buffer_get_data(this.pointer),n=_._wasm_buffer_get_len(this.pointer);return _.HEAPU8.subarray(e,e+n)}slice(e,n){return typeof n>"u"&&(n=this.getLength()),new ee(_._wasm_slice_buffer(this.pointer,e,n))}asString(){return v(_._wasm_string_from_buffer(this.pointer))}save(e){if(Y)Y.writeFileSync(e,this.asUint8Array());else throw new Error("missing 'fs' module")}}ee._drop=_._wasm_drop_buffer;class E extends O{constructor(e,n){if(typeof e=="number")super(e);else{if(typeof e=="string")if(Y)e=Y.readFileSync(e);else throw new Error("missing 'fs' module");super(_._wasm_new_icc_colorspace(Ne(n),X(e)))}}getName(){return v(_._wasm_colorspace_get_name(this.pointer))}getType(){return E.COLORSPACE_TYPES[_._wasm_colorspace_get_type(this.pointer)]||"None"}getNumberOfComponents(){return _._wasm_colorspace_get_n(this.pointer)}isGray(){return this.getType()==="Gray"}isRGB(){return this.getType()==="RGB"}isCMYK(){return this.getType()==="CMYK"}isIndexed(){return this.getType()==="Indexed"}isLab(){return this.getType()==="Lab"}isDeviceN(){return this.getType()==="Separation"}isSubtractive(){return this.getType()==="CMYK"||this.getType()==="Separation"}toString(){return"[ColorSpace "+this.getName()+"]"}}E._drop=_._wasm_drop_colorspace;E.COLORSPACE_TYPES=["None","Gray","RGB","BGR","CMYK","Lab","Indexed","Separation"];E.DeviceGray=new E(_._wasm_device_gray());E.DeviceRGB=new E(_._wasm_device_rgb());E.DeviceBGR=new E(_._wasm_device_bgr());E.DeviceCMYK=new E(_._wasm_device_cmyk());E.Lab=new E(_._wasm_device_lab());class L extends O{constructor(e,n,t=0){let i=0;if(typeof e=="number")i=_._wasm_keep_font(e);else{if(typeof n=="string")if(Y)n=Y.readFileSync(n);else throw new Error("missing 'fs' module");n?i=_._wasm_new_font_from_buffer(b(e),X(n),t):e==="zh-Hant"?i=_._wasm_new_cjk_font(L.ADOBE_CNS):e==="zh-Hans"?i=_._wasm_new_cjk_font(L.ADOBE_GB):e==="ja"?i=_._wasm_new_cjk_font(L.ADOBE_JAPAN):e==="ko"?i=_._wasm_new_cjk_font(L.ADOBE_KOREA):i=_._wasm_new_base14_font(b(e))}super(i)}getName(){return v(_._wasm_font_get_name(this.pointer))}encodeCharacter(e){return typeof e=="string"&&(e=e.charCodeAt(0)),_._wasm_encode_character(this.pointer,e)}advanceGlyph(e,n=0){return _._wasm_advance_glyph(this.pointer,e,n)}isMono(){return!!_._wasm_font_is_monospaced(this.pointer)}isSerif(){return!!_._wasm_font_is_serif(this.pointer)}isBold(){return!!_._wasm_font_is_bold(this.pointer)}isItalic(){return!!_._wasm_font_is_italic(this.pointer)}}L._drop=_._wasm_drop_font;L.SIMPLE_ENCODING=["Latin","Greek","Cyrillic"];L.ADOBE_CNS=0;L.ADOBE_GB=1;L.ADOBE_JAPAN=2;L.ADOBE_KOREA=3;L.CJK_ORDERING_BY_LANG={"Adobe-CNS1":0,"Adobe-GB1":1,"Adobe-Japan1":2,"Adobe-Korea1":3,"zh-Hant":0,"zh-TW":0,"zh-HK":0,"zh-Hans":1,"zh-CN":1,ja:2,ko:3};class te extends O{constructor(e,n){let t=0;if(typeof e=="number")t=_._wasm_keep_image(e);else if(e instanceof re)t=_._wasm_new_image_from_pixmap(e.pointer,n?n.pointer:0);else{if(typeof e=="string")if(Y)e=Y.readFileSync(e);else throw new Error("missing 'fs' module");t=_._wasm_new_image_from_buffer(X(e))}super(t)}getWidth(){return _._wasm_image_get_w(this.pointer)}getHeight(){return _._wasm_image_get_h(this.pointer)}getNumberOfComponents(){return _._wasm_image_get_n(this.pointer)}getBitsPerComponent(){return _._wasm_image_get_bpc(this.pointer)}getXResolution(){return _._wasm_image_get_xres(this.pointer)}getYResolution(){return _._wasm_image_get_yres(this.pointer)}getImageMask(){return!!_._wasm_image_get_imagemask(this.pointer)}getColorSpace(){let e=_._wasm_image_get_colorspace(this.pointer);return e?new E(_._wasm_keep_colorspace(e)):null}getMask(){let e=_._wasm_image_get_mask(this.pointer);return e?new te(_._wasm_keep_image(e)):null}toPixmap(){return new re(_._wasm_get_pixmap_from_image(this.pointer))}}te._drop=_._wasm_drop_image;class j extends O{constructor(e){if(typeof e=="number")return super(e),this;super(_._wasm_new_stroke_state(e?.dashes?.length??0));let n=M(e.lineCap,j.LINE_CAP),t=M(e.lineJoin,j.LINE_JOIN);if(_._wasm_stroke_state_set_start_cap(this.pointer,n),_._wasm_stroke_state_set_dash_cap(this.pointer,n),_._wasm_stroke_state_set_end_cap(this.pointer,n),_._wasm_stroke_state_set_linejoin(this.pointer,t),_._wasm_stroke_state_set_linewidth(this.pointer,e.lineWidth),_._wasm_stroke_state_set_miterlimit(this.pointer,e.miterLimit),_._wasm_stroke_state_set_dash_phase(this.pointer,e.dashPhase??0),e.dashes)for(let i=0;i<e.dashes.length;++i)_._wasm_stroke_state_set_dash_item(this.pointer,i,e.dashes[i]??0)}getLineCap(){return _._wasm_stroke_state_get_start_cap(this.pointer)}getLineJoin(){return _._wasm_stroke_state_get_linejoin(this.pointer)}getLineWidth(){return _._wasm_stroke_state_get_linewidth(this.pointer)}getMiterLimit(){return _._wasm_stroke_state_get_miterlimit(this.pointer)}getDashPhase(){return _._wasm_stroke_state_get_dash_phase(this.pointer)}getDashes(){var e=_._wasm_stroke_state_get_dash_len(this.pointer);if(e>0){var n=[];for(let t=0;t<e;++t)n[t]=_._wasm_stroke_state_get_dash_item(this.pointer,t);return n}return null}}j._drop=_._wasm_drop_stroke_state;j.LINE_CAP=["Butt","Round","Square","Triangle"];j.LINE_JOIN=["Miter","Round","Bevel","MiterXPS"];class pe extends O{constructor(e){typeof e=="number"?super(e):super(_._wasm_new_path())}getBounds(e,n){return e!==null&&d(e,j),k(n),G(_._wasm_bound_path(this.pointer,e?.pointer,T(n)))}moveTo(e,n){d(e,"number"),d(n,"number"),_._wasm_moveto(this.pointer,e,n)}lineTo(e,n){d(e,"number"),d(n,"number"),_._wasm_lineto(this.pointer,e,n)}curveTo(e,n,t,i,o,m){d(e,"number"),d(n,"number"),d(t,"number"),d(i,"number"),d(o,"number"),d(m,"number"),_._wasm_curveto(this.pointer,e,n,t,i,o,m)}curveToV(e,n,t,i){d(e,"number"),d(n,"number"),d(t,"number"),d(i,"number"),_._wasm_curvetov(this.pointer,e,n,t,i)}curveToY(e,n,t,i){d(e,"number"),d(n,"number"),d(t,"number"),d(i,"number"),_._wasm_curvetoy(this.pointer,e,n,t,i)}closePath(){_._wasm_closepath(this.pointer)}rect(e,n,t,i){d(e,"number"),d(n,"number"),d(t,"number"),d(i,"number"),_._wasm_rectto(this.pointer,e,n,t,i)}transform(e){k(e),_._wasm_transform_path(this.pointer,T(e))}walk(e){let n=d_++;ve.set(n,e),_._wasm_walk_path(this.pointer,n),ve.delete(n)}}pe._drop=_._wasm_drop_path;class _e extends O{constructor(e){typeof e=="number"?super(e):super(_._wasm_new_text())}getBounds(e,n){return e!==null&&d(e,j),k(n),G(_._wasm_bound_text(this.pointer,e?.pointer,T(n)))}showGlyph(e,n,t,i,o=0){d(e,L),k(n),d(t,"number"),d(i,"number"),_._wasm_show_glyph(this.pointer,e.pointer,T(n),t,i,o)}showString(e,n,t,i=0){return d(e,L),k(n),d(t,"string"),B(_._wasm_show_string(this.pointer,e.pointer,T(n),b(t),i))}walk(e){let n=m_++;Oe.set(n,e),_._wasm_walk_text(this.pointer,n),Oe.delete(n)}}_e._drop=_._wasm_drop_text;class ze extends O{constructor(e){let n=0;typeof e=="number"?n=e:($(e),n=_._wasm_new_display_list(W(e))),super(n)}getBounds(){return G(_._wasm_bound_display_list(this.pointer))}toPixmap(e,n,t=!1){return k(e),d(n,E),new re(_._wasm_new_pixmap_from_display_list(this.pointer,T(e),n.pointer,t))}toStructuredText(e=""){return d(e,"string"),new de(_._wasm_new_stext_page_from_display_list(this.pointer,b(e)))}run(e,n){d(e,Q),k(n),_._wasm_run_display_list(this.pointer,e.pointer,T(n))}search(e,n=500){return tt(_._wasm_search_display_list,this.pointer,e,n)}}ze._drop=_._wasm_drop_display_list;class re extends O{constructor(e,n,t=!1){typeof e=="number"&&super(e),e instanceof E&&($(n),super(_._wasm_new_pixmap_with_bbox(e.pointer,W(n),t))),e===null&&($(n),super(_._wasm_new_pixmap_with_bbox(0,W(n),t)))}getBounds(){let e=_._wasm_pixmap_get_x(this.pointer),n=_._wasm_pixmap_get_y(this.pointer),t=_._wasm_pixmap_get_w(this.pointer),i=_._wasm_pixmap_get_h(this.pointer);return[e,n,e+t,n+i]}clear(e){typeof e>"u"?_._wasm_clear_pixmap(this.pointer):_._wasm_clear_pixmap_with_value(this.pointer,e)}getWidth(){return _._wasm_pixmap_get_w(this.pointer)}getHeight(){return _._wasm_pixmap_get_h(this.pointer)}getX(){return _._wasm_pixmap_get_x(this.pointer)}getY(){return _._wasm_pixmap_get_y(this.pointer)}getStride(){return _._wasm_pixmap_get_stride(this.pointer)}getNumberOfComponents(){return _._wasm_pixmap_get_n(this.pointer)}getAlpha(){return _._wasm_pixmap_get_alpha(this.pointer)}getXResolution(){return _._wasm_pixmap_get_xres(this.pointer)}getYResolution(){return _._wasm_pixmap_get_yres(this.pointer)}setResolution(e,n){_._wasm_pixmap_set_xres(this.pointer,e),_._wasm_pixmap_set_yres(this.pointer,n)}getColorSpace(){let e=_._wasm_pixmap_get_colorspace(this.pointer);return e?new E(_._wasm_keep_colorspace(e)):null}getPixels(){let e=_._wasm_pixmap_get_stride(this.pointer),n=_._wasm_pixmap_get_h(this.pointer),t=_._wasm_pixmap_get_samples(this.pointer);return new Uint8ClampedArray(_.HEAPU8.buffer,t,e*n)}asPNG(){let e=_._wasm_new_buffer_from_pixmap_as_png(this.pointer);try{return $e(e)}finally{_._wasm_drop_buffer(e)}}asPSD(){let e=_._wasm_new_buffer_from_pixmap_as_psd(this.pointer);try{return $e(e)}finally{_._wasm_drop_buffer(e)}}asPAM(){let e=_._wasm_new_buffer_from_pixmap_as_pam(this.pointer);try{return $e(e)}finally{_._wasm_drop_buffer(e)}}asJPEG(e,n=!1){let t=_._wasm_new_buffer_from_pixmap_as_jpeg(this.pointer,e,n);try{return $e(t)}finally{_._wasm_drop_buffer(t)}}invert(){_._wasm_invert_pixmap(this.pointer)}invertLuminance(){_._wasm_invert_pixmap_luminance(this.pointer)}gamma(e){_._wasm_gamma_pixmap(this.pointer,e)}tint(e,n){let t=0,i=16777215;typeof e=="number"?t=e:e instanceof Array&&e.length===3&&(t=e[0]*255<<16|e[1]*255<<8|e[2]*255),typeof n=="number"?i=n:n instanceof Array&&n.length===3&&(n=n[0]*255<<16|n[1]*255<<8|n[2]*255),_._wasm_tint_pixmap(this.pointer,t,i)}convertToColorSpace(e,n=!1){return d(e,E),d(n,"boolean"),new re(_._wasm_convert_pixmap(this.pointer,e.pointer,n))}warp(e,n,t){let i=e.flat();return Ft(i),d(n,"number"),d(t,"number"),new re(_._wasm_warp_pixmap(this.pointer,St(i),n,t))}}re._drop=_._wasm_drop_pixmap;class _t extends O{getBounds(){return G(_._wasm_bound_shade(this.pointer))}}_t._drop=_._wasm_drop_shade;class de extends O{walk(e){let n=_._wasm_stext_page_get_first_block(this.pointer);for(;n;){let t=_._wasm_stext_block_get_type(n),i=G(_._wasm_stext_block_get_bbox(n));if(t===1){if(e.onImageBlock){let o=B(_._wasm_stext_block_get_transform(n)),m=new te(_._wasm_stext_block_get_image(n));e.onImageBlock(i,o,m)}}else{e.beginTextBlock&&e.beginTextBlock(i);let o=_._wasm_stext_block_get_first_line(n);for(;o;){let m=G(_._wasm_stext_line_get_bbox(o)),w=_._wasm_stext_line_get_wmode(o),g=K(_._wasm_stext_line_get_dir(o));if(e.beginLine&&e.beginLine(m,w,g),e.onChar){let h=_._wasm_stext_line_get_first_char(o);for(;h;){let N=String.fromCharCode(_._wasm_stext_char_get_c(h)),S=K(_._wasm_stext_char_get_origin(h)),me=new L(_._wasm_stext_char_get_font(h)),le=_._wasm_stext_char_get_size(h),be=De(_._wasm_stext_char_get_quad(h)),Be=i_(_._wasm_stext_char_get_argb(h));e.onChar(N,S,me,le,be,Be),h=_._wasm_stext_char_get_next(h)}}e.endLine&&e.endLine(),o=_._wasm_stext_line_get_next(o)}e.endTextBlock&&e.endTextBlock()}n=_._wasm_stext_block_get_next(n)}}asJSON(e=1){return he(_._wasm_print_stext_page_as_json(this.pointer,e))}asHTML(e){return he(_._wasm_print_stext_page_as_html(this.pointer,e))}asText(){return he(_._wasm_print_stext_page_as_text(this.pointer))}snap(e,n,t){let i=M(t,de.SELECT_MODE);return De(_._wasm_snap_selection(this.pointer,oe(e),Ie(n),i))}copy(e,n){return he(_._wasm_copy_selection(this.pointer,oe(e),Ie(n)))}highlight(e,n,t=100){let i=0,o=[];try{i=J(32*t);let m=_._wasm_highlight_selection(this.pointer,oe(e),Ie(n),i,t);for(let w=0;w<m;++w)o.push(De(i+w*32))}finally{ge(i)}return o}search(e,n=500){return tt(_._wasm_search_stext_page,this.pointer,e,n)}}de._drop=_._wasm_drop_stext_page;de.SELECT_MODE=["chars","words","lines"];de.SELECT_CHARS="chars";de.SELECT_WORDS="words";de.SELECT_LINES="lines";class Q extends O{constructor(e){if(typeof e=="number")super(e);else{let n=p_++;P.set(n,e),super(_._wasm_new_js_device(n))}}fillPath(e,n,t,i,o,m){d(e,pe),k(t),d(i,E),Te(o),_._wasm_fill_path(this.pointer,e.pointer,n,T(t),i.pointer,q(o),m)}strokePath(e,n,t,i,o,m){d(e,pe),d(n,j),k(t),d(i,E),Te(o),_._wasm_stroke_path(this.pointer,e.pointer,n.pointer,T(t),i.pointer,q(o),m)}clipPath(e,n,t){d(e,pe),k(t),_._wasm_clip_path(this.pointer,e.pointer,n,T(t))}clipStrokePath(e,n,t){d(e,pe),d(n,j),k(t),_._wasm_clip_stroke_path(this.pointer,e.pointer,n.pointer,T(t))}fillText(e,n,t,i,o){d(e,_e),k(n),d(t,E),Te(i),_._wasm_fill_text(this.pointer,e.pointer,T(n),t.pointer,q(i),o)}strokeText(e,n,t,i,o,m){d(e,_e),d(n,j),k(t),d(i,E),Te(o),_._wasm_stroke_text(this.pointer,e.pointer,n.pointer,T(t),i.pointer,q(o),m)}clipText(e,n){d(e,_e),k(n),_._wasm_clip_text(this.pointer,e.pointer,T(n))}clipStrokeText(e,n,t){d(e,_e),d(n,j),k(t),_._wasm_clip_stroke_text(this.pointer,e.pointer,n.pointer,T(t))}ignoreText(e,n){d(e,_e),k(n),_._wasm_ignore_text(this.pointer,e.pointer,T(n))}fillShade(e,n,t){d(e,_t),k(n),_._wasm_fill_shade(this.pointer,e.pointer,T(n),t)}fillImage(e,n,t){d(e,te),k(n),_._wasm_fill_image(this.pointer,e.pointer,T(n),t)}fillImageMask(e,n,t,i,o){d(e,te),k(n),d(t,E),Te(i),_._wasm_fill_image_mask(this.pointer,e.pointer,T(n),t.pointer,q(i),o)}clipImageMask(e,n){d(e,te),k(n),_._wasm_clip_image_mask(this.pointer,e.pointer,T(n))}popClip(){_._wasm_pop_clip(this.pointer)}beginMask(e,n,t,i){$(e),d(t,E),Te(i),_._wasm_begin_mask(this.pointer,W(e),n,t.pointer,q(i))}endMask(){_._wasm_end_mask(this.pointer)}beginGroup(e,n,t,i,o,m){$(e),d(n,E);let w=M(o,Q.BLEND_MODES);_._wasm_begin_group(this.pointer,W(e),n.pointer,t,i,w,m)}endGroup(){_._wasm_end_group(this.pointer)}beginTile(e,n,t,i,o,m){return $(e),$(n),k(o),_._wasm_begin_tile(this.pointer,W(e),s_(n),t,i,T(o),m)}endTile(){_._wasm_end_tile(this.pointer)}beginLayer(e){_._wasm_begin_layer(this.pointer,b(e))}endLayer(){_._wasm_end_layer(this.pointer)}close(){_._wasm_close_device(this.pointer)}}Q._drop=_._wasm_drop_device;Q.BLEND_MODES=["Normal","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity"];class a_ extends O{constructor(e,n,t){super(_._wasm_new_document_writer_with_buffer(X(e),b(n),Je(t)))}beginPage(e){return $(e),new Q(_._wasm_keep_device(_._wasm_begin_page(this.pointer,W(e))))}endPage(){_._wasm_end_page(this.pointer)}close(){_._wasm_close_document_writer(this.pointer)}}a_._drop=_._wasm_drop_document_writer;class D extends O{static openDocument(e,n){let t=0,i=!1;if(typeof e=="string")if(n=e,Y)e=Y.readFileSync(e);else throw new Error("missing 'fs' module");else typeof n>"u"&&(n="application/pdf");if(d(n,"string"),(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=new ee(e),i=!0),e instanceof ee)t=_._wasm_open_document_with_buffer(b(n),e.pointer);else if(e instanceof Dt)t=_._wasm_open_document_with_stream(b(n),e.pointer);else throw new Error("not a Buffer or Stream");i&&e.destroy();let o=_._wasm_pdf_document_from_fz_document(t);return o?new z(o):new D(t)}formatLinkURI(e){return he(_._wasm_format_link_uri(this.pointer,e.chapter|0,e.page|0,M(e.type,D.LINK_DEST),+e.x,+e.y,+e.width,+e.height,+e.zoom))}asPDF(){return this instanceof z?this:null}isPDF(){return this instanceof z}needsPassword(){return!!_._wasm_needs_password(this.pointer)}authenticatePassword(e){return _._wasm_authenticate_password(this.pointer,b(e))}hasPermission(e){let n=D.PERMISSION[e];return!!_._wasm_has_permission(this.pointer,n)}getMetaData(e){let n=_._wasm_lookup_metadata(this.pointer,b(e));if(n)return v(n)}setMetaData(e,n){_._wasm_set_metadata(this.pointer,b(e),Je(n))}countPages(){return _._wasm_count_pages(this.pointer)}isReflowable(){_._wasm_is_document_reflowable(this.pointer)}layout(e,n,t){_._wasm_layout_document(this.pointer,e,n,t)}loadPage(e){let n=_._wasm_load_page(this.pointer,e);if(this instanceof z){let t=_._wasm_pdf_page_from_fz_page(n);if(t)return new ne(this,t)}return new fe(n)}loadOutline(){let e=this.pointer;function n(i){let o=[];for(;i;){let m=_._wasm_outline_get_title(i),w=_._wasm_outline_get_uri(i),g=_._wasm_outline_get_is_open(i),h={title:m?v(m):void 0,uri:w?v(w):void 0,open:!!g},N=_._wasm_outline_get_page(e,i);N>=0&&(h.page=N);let S=_._wasm_outline_get_down(i);S&&(h.down=n(S)),o.push(h),i=_._wasm_outline_get_next(i)}return o}let t=_._wasm_load_outline(e);return t?n(t):null}resolveLink(e){return e instanceof Pe?_._wasm_resolve_link(this.pointer,_._wasm_link_get_uri(e.pointer)):_._wasm_resolve_link(this.pointer,b(e))}resolveLinkDestination(e){let n;return e instanceof Pe?n=_._wasm_resolve_link_dest(this.pointer,_._wasm_link_get_uri(e.pointer)):n=_._wasm_resolve_link_dest(this.pointer,b(e)),{type:D.LINK_DEST[_._wasm_link_dest_get_type(n)],chapter:_._wasm_link_dest_get_chapter(n),page:_._wasm_link_dest_get_page(n),x:_._wasm_link_dest_get_x(n),y:_._wasm_link_dest_get_y(n),width:_._wasm_link_dest_get_w(n),height:_._wasm_link_dest_get_h(n),zoom:_._wasm_link_dest_get_zoom(n)}}outlineIterator(){return new Re(_._wasm_new_outline_iterator(this.pointer))}}D._drop=_._wasm_drop_document;D.META_FORMAT="format";D.META_ENCRYPTION="encryption";D.META_INFO_AUTHOR="info:Author";D.META_INFO_TITLE="info:Title";D.META_INFO_SUBJECT="info:Subject";D.META_INFO_KEYWORDS="info:Keywords";D.META_INFO_CREATOR="info:Creator";D.META_INFO_PRODUCER="info:Producer";D.META_INFO_CREATIONDATE="info:CreationDate";D.META_INFO_MODIFICATIONDATE="info:ModDate";D.PERMISSION={print:112,copy:99,edit:101,annotate:110,form:102,accessibility:121,assemble:97,"print-hq":104};D.LINK_DEST=["Fit","FitB","FitH","FitBH","FitV","FitBV","FitR","XYZ"];class Re extends O{item(){let e=_._wasm_outline_iterator_item(this.pointer);if(e){let n=_._wasm_outline_item_get_title(e),t=_._wasm_outline_item_get_uri(e),i=_._wasm_outline_item_get_is_open(e);return{title:n?v(n):void 0,uri:t?v(t):void 0,open:!!i}}return null}next(){return _._wasm_outline_iterator_next(this.pointer)}prev(){return _._wasm_outline_iterator_prev(this.pointer)}up(){return _._wasm_outline_iterator_up(this.pointer)}down(){return _._wasm_outline_iterator_down(this.pointer)}delete(){return _._wasm_outline_iterator_delete(this.pointer)}insert(e){return _._wasm_outline_iterator_insert(this.pointer,Ne(e.title),Ge(e.uri),e.open)}update(e){_._wasm_outline_iterator_update(this.pointer,Ne(e.title),Ge(e.uri),e.open)}}Re._drop=_._wasm_drop_outline_iterator;Re.RESULT_DID_NOT_MOVE=-1;Re.RESULT_AT_ITEM=0;Re.RESULT_AT_EMPTY=1;class Pe extends O{getBounds(){return G(_._wasm_link_get_rect(this.pointer))}setBounds(e){$(e),_._wasm_link_set_rect(this.pointer,W(e))}getURI(){return v(_._wasm_link_get_uri(this.pointer))}setURI(e){d(e,"string"),_._wasm_link_set_uri(this.pointer,b(e))}isExternal(){return/^\w[\w+-.]*:/.test(this.getURI())}}Pe._drop=_._wasm_drop_link;class fe extends O{isPDF(){return this instanceof ne}getBounds(e="CropBox"){let n=M(e,fe.BOXES);return G(_._wasm_bound_page(this.pointer,n))}getLabel(){return v(_._wasm_page_label(this.pointer))}run(e,n){d(e,Q),k(n),_._wasm_run_page(this.pointer,e.pointer,T(n))}runPageContents(e,n){d(e,Q),k(n),_._wasm_run_page_contents(this.pointer,e.pointer,T(n))}runPageAnnots(e,n){d(e,Q),k(n),_._wasm_run_page_annots(this.pointer,e.pointer,T(n))}runPageWidgets(e,n){d(e,Q),k(n),_._wasm_run_page_widgets(this.pointer,e.pointer,T(n))}toPixmap(e,n,t=!1,i=!0){d(n,E),k(e);let o;return i?o=_._wasm_new_pixmap_from_page(this.pointer,T(e),n.pointer,t):o=_._wasm_new_pixmap_from_page_contents(this.pointer,T(e),n.pointer,t),new re(o)}toDisplayList(e=!0){let n;return e?n=_._wasm_new_display_list_from_page(this.pointer):n=_._wasm_new_display_list_from_page_contents(this.pointer),new ze(n)}toStructuredText(e=""){return d(e,"string"),new de(_._wasm_new_stext_page_from_page(this.pointer,b(e)))}getLinks(){let e=[],n=_._wasm_load_links(this.pointer);for(;n;)e.push(new Pe(_._wasm_keep_link(n))),n=_._wasm_link_get_next(n);return e}createLink(e,n){return $(e),new Pe(_._wasm_create_link(this.pointer,W(e),b(n)))}deleteLink(e){d(e,Pe),_._wasm_delete_link(this.pointer,e.pointer)}search(e,n=500){return tt(_._wasm_search_page,this.pointer,e,n)}}fe._drop=_._wasm_drop_page;fe.BOXES=["MediaBox","CropBox","BleedBox","TrimBox","ArtBox"];class z extends D{constructor(e){if(typeof e>"u")super(_._wasm_pdf_create_document());else if(typeof e=="number")super(e);else if(e instanceof z)super(e.pointer),_._wasm_keep_document(this.pointer);else{let n=D.openDocument(e,"application/pdf");if(n instanceof z)return n;throw new Error("not a PDF document")}}loadPage(e){return super.loadPage(e)}_fromPDFObjectNew(e){return e===0?F.Null:new F(this,e)}_fromPDFObjectKeep(e){return e===0?F.Null:new F(this,_._wasm_pdf_keep_obj(e))}_toPDFObject(e){if(e instanceof F)return e;if(e==null)return this.newNull();if(typeof e=="string")return e.startsWith("(")&&e.endsWith(")")?this.newString(e.slice(1,-1)):this.newName(e);if(typeof e=="number")return e===(e|0)?this.newInteger(e):this.newReal(e);if(typeof e=="boolean")return this.newBoolean(e);if(e instanceof Array){let n=this.newArray();for(let t of e)n.push(t);return n}if(e instanceof Object){let n=this.newDictionary();for(let t in e)n.put(t,e[t]);return n}throw new TypeError("cannot convert value to PDFObject")}_PDFOBJ(e){return this._toPDFObject(e).pointer}getVersion(){return _._wasm_pdf_version(this.pointer)}getLanguage(){return Lt(_._wasm_pdf_document_language(this.pointer))}setLanguage(e){_._wasm_pdf_set_document_language(this.pointer,b(e))}countObjects(){return _._wasm_pdf_xref_len(this.pointer)}getTrailer(){return new F(this,_._wasm_pdf_trailer(this.pointer))}createObject(){let e=_._wasm_pdf_create_object(this.pointer);return this._fromPDFObjectNew(_._wasm_pdf_new_indirect(this.pointer,e))}newNull(){return F.Null}newBoolean(e){return this._fromPDFObjectNew(_._wasm_pdf_new_bool(e))}newInteger(e){return this._fromPDFObjectNew(_._wasm_pdf_new_int(e))}newReal(e){return this._fromPDFObjectNew(_._wasm_pdf_new_real(e))}newName(e){return this._fromPDFObjectNew(_._wasm_pdf_new_name(b(e)))}newString(e){return this._fromPDFObjectNew(_._wasm_pdf_new_text_string(b(e)))}newByteString(e){e instanceof Array&&(e=Uint8Array.from(e)),d(e,Uint8Array);let n=e.byteLength,t=J(n);_.HEAPU8.set(e,t);try{return this._fromPDFObjectNew(_._wasm_pdf_new_string(t,n))}finally{ge(t)}}newIndirect(e){return this._fromPDFObjectNew(_._wasm_pdf_new_indirect(this.pointer,e))}newArray(){return this._fromPDFObjectNew(_._wasm_pdf_new_array(this.pointer))}newDictionary(){return this._fromPDFObjectNew(_._wasm_pdf_new_dict(this.pointer))}deleteObject(e){e instanceof F?e=e.asIndirect():d(e,"number"),_._wasm_pdf_delete_object(this.pointer,e)}addObject(e){return this._fromPDFObjectNew(_._wasm_pdf_add_object(this.pointer,this._PDFOBJ(e)))}addStream(e,n){return this._fromPDFObjectNew(_._wasm_pdf_add_stream(this.pointer,X(e),this._PDFOBJ(n),0))}addRawStream(e,n){return this._fromPDFObjectNew(_._wasm_pdf_add_stream(this.pointer,X(e),this._PDFOBJ(n),1))}newGraftMap(){return new It(this,_._wasm_pdf_new_graft_map(this.pointer))}graftObject(e){return d(e,F),this._fromPDFObjectNew(_._wasm_pdf_graft_object(this.pointer,e.pointer))}graftPage(e,n,t){d(e,"number"),d(n,z),d(t,"number"),_._wasm_pdf_graft_page(this.pointer,e,n.pointer,t)}addSimpleFont(e,n="Latin"){d(e,L);var t=M(n,L.SIMPLE_ENCODING);return this._fromPDFObjectNew(_._wasm_pdf_add_simple_font(this.pointer,e.pointer,t))}addCJKFont(e,n,t=0,i=!0){return d(e,L),typeof n=="string"&&(n=L.CJK_ORDERING_BY_LANG[n]),this._fromPDFObjectNew(_._wasm_pdf_add_cjk_font(this.pointer,e.pointer,n,t,i))}addFont(e){return d(e,L),this._fromPDFObjectNew(_._wasm_pdf_add_cid_font(this.pointer,e.pointer))}addImage(e){return d(e,te),this._fromPDFObjectNew(_._wasm_pdf_add_image(this.pointer,e.pointer))}loadImage(e){return d(e,F),new te(_._wasm_pdf_load_image(this.pointer,e.pointer))}findPage(e){return d(e,"number"),this._fromPDFObjectKeep(_._wasm_pdf_lookup_page_obj(this.pointer,e))}addPage(e,n,t,i){return $(e),d(n,"number"),this._fromPDFObjectNew(_._wasm_pdf_add_page(this.pointer,W(e),n,this._PDFOBJ(t),X(i)))}insertPage(e,n){d(e,"number"),_._wasm_pdf_insert_page(this.pointer,e,this._PDFOBJ(n))}deletePage(e){d(e,"number"),_._wasm_pdf_delete_page(this.pointer,e)}isEmbeddedFile(e){return d(e,F),!!_._wasm_pdf_is_embedded_file(e.pointer)}addEmbeddedFile(e,n,t,i,o,m=!1){return d(e,"string"),d(n,"string"),d(i,Date),d(o,Date),d(m,"boolean"),this._fromPDFObjectNew(_._wasm_pdf_add_embedded_file(this.pointer,b(e),Je(n),X(t),i.getTime()/1e3|0,o.getTime()/1e3|0,m))}getFilespecParams(e){d(e,F);let n=_._wasm_pdf_get_filespec_params(e.pointer);return{filename:v(_._wasm_pdf_filespec_params_get_filename(n)),mimetype:v(_._wasm_pdf_filespec_params_get_mimetype(n)),size:_._wasm_pdf_filespec_params_get_filename(n),creationDate:new Date(_._wasm_pdf_filespec_params_get_created(n)*1e3),modificationDate:new Date(_._wasm_pdf_filespec_params_get_modified(n)*1e3)}}getEmbeddedFileContents(e){d(e,F);let n=_._wasm_pdf_load_embedded_file_contents(e.pointer);return n?new ee(n):null}getEmbeddedFiles(){function e(n,t){var i,o;if(t.isDictionary()){var m=t.get("Names");if(m)for(i=0,o=m.length;i<o;i+=2)n[m.get(i+0).asString()]=m.get(i+1);var w=t.get("Kids");if(w)for(i=0,o=w.length;i<o;i+=1)e(n,w.get(i))}return n}return e({},this.getTrailer().get("Root","Names","EmbeddedFiles"))}loadNameTree(e){function n(o,m){var w=m.get("Kids");if(w&&w.isArray())for(var g=0;g<w.length;g+=1)n(o,w.get(g));var h=m.get("Names");if(h&&h.isArray())for(var g=0;g<h.length;g+=2)o[h.get(g).asString()]=h.get(g+1)}var t=this.getTrailer().get("Root").get("Names").get(e),i={};return t.isDictionary()&&n(i,t),i}insertEmbeddedFile(e,n){var t=this.getEmbeddedFiles();t[e]=n,this._rewriteEmbeddedFiles(t)}deleteEmbeddedFile(e){var n=this.getEmbeddedFiles();delete n[e],this._rewriteEmbeddedFiles(n)}_rewriteEmbeddedFiles(e){var n=Object.keys(e);n.sort();var t=this.getTrailer().get("Root"),i=t.get("Names");i.isDictionary()||(i=t.put("Names",this.newDictionary()));var o=i.put("EmbeddedFiles",this.newDictionary()),m=o.put("Names",this.newArray());for(var w of n)m.push(this.newString(w)),m.push(e[w])}saveToBuffer(e=""){var n;return typeof e=="object"?n=Object.entries(e).map(t=>{var i=t[0],o=t[1];return o===!0?i+"=yes":o===!1?i+"=no":i+"="+String(o).replaceAll(",",":")}).join(","):n=e,new ee(_._wasm_pdf_write_document_buffer(this.pointer,b(n)))}save(e,n=""){if(Y)Y.writeFileSync(e,this.saveToBuffer(n).asUint8Array());else throw new Error("missing 'fs' module")}setPageLabels(e,n="D",t="",i=1){_._wasm_pdf_set_page_labels(this.pointer,e,n.charCodeAt(0),b(t),i)}deletePageLabels(e){_._wasm_pdf_delete_page_labels(this.pointer,e)}wasRepaired(){return!!_._wasm_pdf_was_repaired(this.pointer)}hasUnsavedChanges(){return!!_._wasm_pdf_has_unsaved_changes(this.pointer)}countVersions(){return _._wasm_pdf_count_versions(this.pointer)}countUnsavedVersions(){return _._wasm_pdf_count_unsaved_versions(this.pointer)}validateChangeHistory(){return _._wasm_pdf_validate_change_history(this.pointer)}canBeSavedIncrementally(){return!!_._wasm_pdf_can_be_saved_incrementally(this.pointer)}enableJournal(){_._wasm_pdf_enable_journal(this.pointer)}getJournal(){let e=_._wasm_pdf_undoredo_state_position(this.pointer),n=_._wasm_pdf_undoredo_state_count(this.pointer),t=[];for(let i=0;i<n;++i)t.push(v(_._wasm_pdf_undoredo_step(this.pointer,i)));return{position:e,steps:t}}beginOperation(e){_._wasm_pdf_begin_operation(this.pointer,b(e))}beginImplicitOperation(){_._wasm_pdf_begin_implicit_operation(this.pointer)}endOperation(){_._wasm_pdf_end_operation(this.pointer)}abandonOperation(){_._wasm_pdf_abandon_operation(this.pointer)}canUndo(){return!!_._wasm_pdf_can_undo(this.pointer)}canRedo(){return!!_._wasm_pdf_can_redo(this.pointer)}undo(){_._wasm_pdf_undo(this.pointer)}redo(){_._wasm_pdf_redo(this.pointer)}isJSSupported(){return!!_._wasm_pdf_js_supported(this.pointer)}enableJS(){_._wasm_pdf_enable_js(this.pointer)}disableJS(){_._wasm_pdf_disable_js(this.pointer)}setJSEventListener(e){throw"TODO"}rearrangePages(e){let n=e.length,t=J(n<<2);for(let i=0;i<n;++i)_.HEAPU32[(t>>2)+i]=e[i]||0;try{_._wasm_pdf_rearrange_pages(this.pointer,n,t)}finally{ge(t)}}subsetFonts(){_._wasm_pdf_subset_fonts(this.pointer)}bake(e=!0,n=!0){_._wasm_pdf_bake_document(this.pointer,e,n)}countLayers(){return _._wasm_pdf_count_layers(this.pointer)}isLayerVisible(e){return!!_._wasm_pdf_layer_is_enabled(this.pointer,e)}setLayerVisible(e,n){_._wasm_pdf_enable_layer(this.pointer,e,Number(n))}getLayerName(e){return v(_._wasm_pdf_layer_name(this.pointer,e))}resetForm(e,n){_._wasm_pdf_reset_form(this.pointer,this._PDFOBJ(e),Number(n))}}z.PAGE_LABEL_NONE="\0";z.PAGE_LABEL_DECIMAL="D";z.PAGE_LABEL_ROMAN_UC="R";z.PAGE_LABEL_ROMAN_LC="r";z.PAGE_LABEL_ALPHA_UC="A";z.PAGE_LABEL_ALPHA_LC="a";class ne extends fe{constructor(e,n){super(n),this._doc=e,this._annots=null,this._widgets=null}getObject(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_page_get_obj(this.pointer))}getTransform(){return B(_._wasm_pdf_page_transform(this.pointer))}setPageBox(e,n){let t=M(e,fe.BOXES);$(n),_._wasm_pdf_set_page_box(this.pointer,t,W(n))}toPixmap(e,n,t=!1,i=!0,o="View",m="CropBox"){k(e),d(n,E);let w=M(m,fe.BOXES),g;return i?g=_._wasm_pdf_new_pixmap_from_page_with_usage(this.pointer,T(e),n.pointer,t,b(o),w):g=_._wasm_pdf_new_pixmap_from_page_contents_with_usage(this.pointer,T(e),n.pointer,t,b(o),w),new re(g)}getWidgets(){if(!this._widgets){this._widgets=[];let e=_._wasm_pdf_first_widget(this.pointer);for(;e;)this._widgets.push(new I(this._doc,_._wasm_pdf_keep_annot(e))),e=_._wasm_pdf_next_widget(e)}return this._widgets}getAnnotations(){if(!this._annots){this._annots=[];let e=_._wasm_pdf_first_annot(this.pointer);for(;e;)this._annots.push(new x(this._doc,_._wasm_pdf_keep_annot(e))),e=_._wasm_pdf_next_annot(e)}return this._annots}createAnnotation(e){let n=M(e,x.ANNOT_TYPES),t=new x(this._doc,_._wasm_pdf_create_annot(this.pointer,n));return this._annots&&this._annots.push(t),t}deleteAnnotation(e){if(d(e,x),_._wasm_pdf_delete_annot(this.pointer,e.pointer),this._annots){let n=this._annots.indexOf(e);n>=0&&this._annots.splice(n,1)}}applyRedactions(e=!0,n=2,t=1,i=0){_._wasm_pdf_redact_page(this.pointer,Number(e),n,t,i)}update(){return!!_._wasm_pdf_update_page(this.pointer)}}ne.REDACT_IMAGE_NONE=0;ne.REDACT_IMAGE_REMOVE=1;ne.REDACT_IMAGE_PIXELS=2;ne.REDACT_IMAGE_UNLESS_INVISIBLE=3;ne.REDACT_LINE_ART_NONE=0;ne.REDACT_LINE_ART_REMOVE_IF_COVERED=1;ne.REDACT_LINE_ART_REMOVE_IF_TOUCHED=2;ne.REDACT_TEXT_REMOVE=0;ne.REDACT_TEXT_NONE=1;class F extends O{constructor(e,n){super(_._wasm_pdf_keep_obj(n)),this._doc=e}isNull(){return this===F.Null}isIndirect(){return!!_._wasm_pdf_is_indirect(this.pointer)}isBoolean(){return!!_._wasm_pdf_is_bool(this.pointer)}isInteger(){return!!_._wasm_pdf_is_int(this.pointer)}isReal(){return!!_._wasm_pdf_is_real(this.pointer)}isNumber(){return!!_._wasm_pdf_is_number(this.pointer)}isName(){return!!_._wasm_pdf_is_name(this.pointer)}isString(){return!!_._wasm_pdf_is_string(this.pointer)}isArray(){return!!_._wasm_pdf_is_array(this.pointer)}isDictionary(){return!!_._wasm_pdf_is_dict(this.pointer)}isStream(){return!!_._wasm_pdf_is_stream(this.pointer)}asIndirect(){return _._wasm_pdf_to_num(this.pointer)}asBoolean(){return!!_._wasm_pdf_to_bool(this.pointer)}asNumber(){return _._wasm_pdf_to_real(this.pointer)}asName(){return v(_._wasm_pdf_to_name(this.pointer))}asString(){return v(_._wasm_pdf_to_text_string(this.pointer))}asByteString(){let e=_._wasm_pdf_to_string(this.pointer,Tt),n=_.HEAPU32[Tt>>2];return _.HEAPU8.slice(e,e+n)}readStream(){return new ee(_._wasm_pdf_load_stream(this.pointer))}readRawStream(){return new ee(_._wasm_pdf_load_raw_stream(this.pointer))}writeObject(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeObject on an indirect reference");_._wasm_pdf_update_object(this._doc.pointer,this.asIndirect(),this._doc._PDFOBJ(e))}writeStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeStream on an indirect reference");_._wasm_pdf_update_stream(this._doc.pointer,this.pointer,X(e),0)}writeRawStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeRawStream on an indirect reference");_._wasm_pdf_update_stream(this._doc.pointer,this.pointer,X(e),1)}resolve(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_resolve_indirect(this.pointer))}get length(){return _._wasm_pdf_array_len(this.pointer)}set length(e){throw new TypeError("object length is read-only")}_get(e){let n=this.pointer;for(let t of e)if(typeof t=="number"?n=_._wasm_pdf_array_get(n,t):t instanceof F?n=_._wasm_pdf_dict_get(n,t.pointer):n=_._wasm_pdf_dict_gets(n,b(t)),n===0)break;return n}get(...e){return this._doc._fromPDFObjectKeep(this._get(e))}getInheritable(e){return e instanceof F?this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_get_inheritable(this.pointer,e.pointer)):this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_gets_inheritable(this.pointer,b(e)))}put(e,n){return n=this._doc._toPDFObject(n),typeof e=="number"?_._wasm_pdf_array_put(this.pointer,e,n.pointer):e instanceof F?_._wasm_pdf_dict_put(this.pointer,e.pointer,n.pointer):_._wasm_pdf_dict_puts(this.pointer,b(e),n.pointer),n}push(e){return e=this._doc._toPDFObject(e),_._wasm_pdf_array_push(this.pointer,e.pointer),e}delete(e){typeof e=="number"?_._wasm_pdf_array_delete(this.pointer,e):e instanceof F?_._wasm_pdf_dict_del(this.pointer,e.pointer):_._wasm_pdf_dict_dels(this.pointer,b(e))}valueOf(){return this.isNull()?null:this.isBoolean()?this.asBoolean():this.isNumber()?this.asNumber():this.isName()?this.asName():this.isString()?this.asString():this.isIndirect()?`${this.asIndirect()} 0 R`:this}toString(e=!0,n=!0){return he(_._wasm_pdf_sprint_obj(this.pointer,e,n))}forEach(e){if(this.isArray()){let n=this.length;for(let t=0;t<n;++t)e(this.get(t),t,this)}else if(this.isDictionary()){let n=_._wasm_pdf_dict_len(this.pointer);for(let t=0;t<n;++t){let i=this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_get_key(this.pointer,t)),o=this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_get_val(this.pointer,t));e(o,i.asName(),this)}}}asJS(e){if(this.isIndirect()){let n=this.asIndirect();return e?n in e?e[n]:(e[n]=F.Null,e[n]=this.resolve().asJS(e)):`${n} 0 R`}if(this.isArray()){let n=[];return this.forEach(t=>{n.push(t.asJS(e))}),n}if(this.isDictionary()){let n={};return this.forEach((t,i)=>{n[i]=t.asJS(e)}),n}return this.valueOf()}}F._drop=_._wasm_pdf_drop_obj;F.Null=new F(null,0);class It extends O{constructor(e,n){super(n),this._doc=e}graftObject(e){return d(e,F),this._doc._fromPDFObjectNew(_._wasm_pdf_graft_mapped_object(this.pointer,e.pointer))}graftPage(e,n,t){d(e,"number"),d(n,z),d(t,"number"),_._wasm_pdf_graft_mapped_page(this.pointer,e,n.pointer,t)}}It._drop=_._wasm_pdf_drop_graft_map;class x extends O{constructor(e,n){super(n),this._doc=e}getObject(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_annot_obj(this.pointer))}getBounds(){return G(_._wasm_pdf_bound_annot(this.pointer))}run(e,n){d(e,Q),k(n),_._wasm_pdf_run_annot(this.pointer,e.pointer,T(n))}toPixmap(e,n,t=!1){return k(e),d(n,E),new re(_._wasm_pdf_new_pixmap_from_annot(this.pointer,T(e),n.pointer,t))}toDisplayList(){return new ze(_._wasm_pdf_new_display_list_from_annot(this.pointer))}update(){return!!_._wasm_pdf_update_annot(this.pointer)}getType(){let e=_._wasm_pdf_annot_type(this.pointer);return x.ANNOT_TYPES[e]||"Text"}getLanguage(){return Lt(_._wasm_pdf_annot_language(this.pointer))}setLanguage(e){_._wasm_pdf_set_annot_language(this.pointer,b(e))}getFlags(){return _._wasm_pdf_annot_flags(this.pointer)}setFlags(e){return _._wasm_pdf_set_annot_flags(this.pointer,e)}getContents(){return v(_._wasm_pdf_annot_contents(this.pointer))}setContents(e){_._wasm_pdf_set_annot_contents(this.pointer,b(e))}getAuthor(){return v(_._wasm_pdf_annot_author(this.pointer))}setAuthor(e){_._wasm_pdf_set_annot_author(this.pointer,b(e))}getCreationDate(){return new Date(_._wasm_pdf_annot_creation_date(this.pointer)*1e3)}setCreationDate(e){d(e,Date),_._wasm_pdf_set_annot_creation_date(this.pointer,e.getTime()/1e3)}getModificationDate(){return new Date(_._wasm_pdf_annot_modification_date(this.pointer)*1e3)}setModificationDate(e){d(e,Date),_._wasm_pdf_set_annot_modification_date(this.pointer,e.getTime()/1e3)}hasRect(){return!!_._wasm_pdf_annot_has_rect(this.pointer)}hasInkList(){return!!_._wasm_pdf_annot_has_ink_list(this.pointer)}hasQuadPoints(){return!!_._wasm_pdf_annot_has_quad_points(this.pointer)}hasVertices(){return!!_._wasm_pdf_annot_has_vertices(this.pointer)}hasLine(){return!!_._wasm_pdf_annot_has_line(this.pointer)}hasInteriorColor(){return!!_._wasm_pdf_annot_has_interior_color(this.pointer)}hasLineEndingStyles(){return!!_._wasm_pdf_annot_has_line_ending_styles(this.pointer)}hasBorder(){return!!_._wasm_pdf_annot_has_border(this.pointer)}hasBorderEffect(){return!!_._wasm_pdf_annot_has_border_effect(this.pointer)}hasIcon(){return!!_._wasm_pdf_annot_has_icon_name(this.pointer)}hasOpen(){return!!_._wasm_pdf_annot_has_open(this.pointer)}hasAuthor(){return!!_._wasm_pdf_annot_has_author(this.pointer)}hasFilespec(){return!!_._wasm_pdf_annot_has_filespec(this.pointer)}hasCallout(){return!!_._wasm_pdf_annot_has_callout(this.pointer)}hasRichContents(){return!!_._wasm_pdf_annot_has_rich_contents(this.pointer)}getRect(){return G(_._wasm_pdf_annot_rect(this.pointer))}setRect(e){$(e),_._wasm_pdf_set_annot_rect(this.pointer,W(e))}getPopup(){return G(_._wasm_pdf_annot_popup(this.pointer))}setPopup(e){$(e),_._wasm_pdf_set_annot_popup(this.pointer,W(e))}getIsOpen(){return!!_._wasm_pdf_annot_is_open(this.pointer)}setIsOpen(e){d(e,"boolean"),_._wasm_pdf_set_annot_is_open(this.pointer,e)}getHiddenForEditing(){return!!_._wasm_pdf_annot_hidden_for_editing(this.pointer)}setHiddenForEditing(e){d(e,"boolean"),_._wasm_pdf_set_annot_hidden_for_editing(this.pointer,e)}getIcon(){return v(_._wasm_pdf_annot_icon_name(this.pointer))}setIcon(e){d(e,"string"),_._wasm_pdf_set_annot_icon_name(this.pointer,b(e))}getOpacity(){return _._wasm_pdf_annot_opacity(this.pointer)}setOpacity(e){d(e,"number"),_._wasm_pdf_set_annot_opacity(this.pointer,e)}getQuadding(){return _._wasm_pdf_annot_quadding(this.pointer)}setQuadding(e){d(e,"number"),_._wasm_pdf_set_annot_quadding(this.pointer,e)}getLine(){let e=K(_._wasm_pdf_annot_line_1(this.pointer)),n=K(_._wasm_pdf_annot_line_2(this.pointer));return[e,n]}setLine(e,n){Ue(e),Ue(n),_._wasm_pdf_set_annot_line(this.pointer,oe(e),Ie(n))}getLineEndingStyles(){let e=_._wasm_pdf_annot_line_ending_styles_start(this.pointer),n=_._wasm_pdf_annot_line_ending_styles_end(this.pointer);return{start:x.LINE_ENDING[e]||"None",end:x.LINE_ENDING[n]||"None"}}setLineEndingStyles(e,n){let t=M(e,x.LINE_ENDING),i=M(n,x.LINE_ENDING);_._wasm_pdf_set_annot_line_ending_styles(this.pointer,t,i)}getLineCaption(){return _._wasm_pdf_annot_line_caption(this.pointer)}setLineCaption(e){return _._wasm_pdf_set_annot_line_caption(this.pointer,e)}getLineCaptionOffset(){return K(_._wasm_pdf_annot_line_caption_offset(this.pointer))}setLineCaptionOffset(e){return _._wasm_pdf_set_annot_line_caption_offset(this.pointer,oe(e))}getLineLeader(){return _._wasm_pdf_annot_line_leader(this.pointer)}getLineLeaderExtension(){return _._wasm_pdf_annot_line_leader_extension(this.pointer)}getLineLeaderOffset(){return _._wasm_pdf_annot_line_leader_offset(this.pointer)}setLineLeader(e){return _._wasm_pdf_set_annot_line_leader(this.pointer,e)}setLineLeaderExtension(e){return _._wasm_pdf_set_annot_line_leader_extension(this.pointer,e)}setLineLeaderOffset(e){return _._wasm_pdf_set_annot_line_leader_offset(this.pointer,e)}getCalloutStyle(){let e=_._wasm_pdf_annot_callout_style(this.pointer);return x.LINE_ENDING[e]||"None"}setCalloutStyle(e){let n=M(e,x.LINE_ENDING);_._wasm_pdf_set_annot_callout_style(this.pointer,n)}getCalloutLine(){let e=_._wasm_pdf_annot_callout_line(this.pointer,U<<2);return e==3?[K(U+0<<2),K(U+1<<2),K(U+2<<2)]:e==2?[K(U+0<<2),K(U+1<<2)]:null}setCalloutLine(e){let n=e[0]||[0,0],t=e[1]||[0,0],i=e[2]||[0,0];_._wasm_pdf_set_annot_callout_line(this.pointer,e.length,oe(n),Ie(t),n_(i))}getCalloutPoint(){let e=this.getCalloutLine();if(e)return e[0]}setCalloutPoint(e){_._wasm_pdf_set_annot_callout_point(this.pointer,oe(e))}getColor(){return Ze(_._wasm_pdf_annot_color(this.pointer,q()))}getInteriorColor(){return Ze(_._wasm_pdf_annot_interior_color(this.pointer,q()))}setColor(e){Qe(e),_._wasm_pdf_set_annot_color(this.pointer,e.length,q(e))}setInteriorColor(e){Qe(e),_._wasm_pdf_set_annot_interior_color(this.pointer,e.length,q(e))}getBorderWidth(){return _._wasm_pdf_annot_border_width(this.pointer)}setBorderWidth(e){return d(e,"number"),_._wasm_pdf_set_annot_border_width(this.pointer,e)}getBorderStyle(){return x.BORDER_STYLE[_._wasm_pdf_annot_border_style(this.pointer)]||"Solid"}setBorderStyle(e){let n=M(e,x.BORDER_STYLE);return _._wasm_pdf_set_annot_border_style(this.pointer,n)}getBorderEffect(){return x.BORDER_EFFECT[_._wasm_pdf_annot_border_effect(this.pointer)]||"None"}setBorderEffect(e){let n=M(e,x.BORDER_EFFECT);return _._wasm_pdf_set_annot_border_effect(this.pointer,n)}getBorderEffectIntensity(){return _._wasm_pdf_annot_border_effect_intensity(this.pointer)}setBorderEffectIntensity(e){return d(e,"number"),_._wasm_pdf_set_annot_border_effect_intensity(this.pointer,e)}getBorderDashCount(){return _._wasm_pdf_annot_border_dash_count(this.pointer)}getBorderDashItem(e){return _._wasm_pdf_annot_border_dash_item(this.pointer,e)}clearBorderDash(){_._wasm_pdf_clear_annot_border_dash(this.pointer)}addBorderDashItem(e){return d(e,"number"),_._wasm_pdf_add_annot_border_dash_item(this.pointer,e)}getBorderDashPattern(){let e=this.getBorderDashCount(),n=new Array(e);for(let t=0;t<e;++t)n[t]=this.getBorderDashItem(t);return n}setBorderDashPattern(e){this.clearBorderDash();for(let n of e)this.addBorderDashItem(n)}getIntent(){return x.INTENT[_._wasm_pdf_annot_intent(this.pointer)]||null}setIntent(e){let n=M(e,x.INTENT);return _._wasm_pdf_set_annot_intent(this.pointer,n)}setDefaultAppearance(e,n,t){d(e,"string"),d(n,"number"),Qe(t),_._wasm_pdf_set_annot_default_appearance(this.pointer,b(e),n,t.length,q(t))}getDefaultAppearance(){let e=v(_._wasm_pdf_annot_default_appearance_font(this.pointer)),n=_._wasm_pdf_annot_default_appearance_size(this.pointer),t=Ze(_._wasm_pdf_annot_default_appearance_color(this.pointer,q()));return{font:e,size:n,color:t}}getFileSpec(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_annot_filespec(this.pointer))}setFileSpec(e){return _._wasm_pdf_set_annot_filespec(this.pointer,this._doc._PDFOBJ(e))}getQuadPoints(){let e=_._wasm_pdf_annot_quad_point_count(this.pointer),n=[];for(let t=0;t<e;++t)n.push(De(_._wasm_pdf_annot_quad_point(this.pointer,t)));return n}clearQuadPoints(){_._wasm_pdf_clear_annot_quad_points(this.pointer)}addQuadPoint(e){Ft(e),_._wasm_pdf_add_annot_quad_point(this.pointer,St(e))}setQuadPoints(e){this.clearQuadPoints();for(let n of e)this.addQuadPoint(n)}getVertices(){let e=_._wasm_pdf_annot_vertex_count(this.pointer),n=new Array(e);for(let t=0;t<e;++t)n[t]=K(_._wasm_pdf_annot_vertex(this.pointer,t));return n}clearVertices(){_._wasm_pdf_clear_annot_vertices(this.pointer)}addVertex(e){Ue(e),_._wasm_pdf_add_annot_vertex(this.pointer,oe(e))}setVertices(e){this.clearVertices();for(let n of e)this.addVertex(n)}getInkList(){let e=_._wasm_pdf_annot_ink_list_count(this.pointer),n=[];for(let t=0;t<e;++t){let i=_._wasm_pdf_annot_ink_list_stroke_count(this.pointer,t),o=new Array(i);for(let m=0;m<i;++m)o[m]=K(_._wasm_pdf_annot_ink_list_stroke_vertex(this.pointer,t,m));n.push(o)}return n}clearInkList(){_._wasm_pdf_clear_annot_ink_list(this.pointer)}addInkListStroke(){_._wasm_pdf_add_annot_ink_list_stroke(this.pointer)}addInkListStrokeVertex(e){Ue(e),_._wasm_pdf_add_annot_ink_list_stroke_vertex(this.pointer,oe(e))}setInkList(e){this.clearInkList();for(let n of e){this.addInkListStroke();for(let t of n)this.addInkListStrokeVertex(t)}}getRichContents(){return v(_._wasm_pdf_annot_rich_contents(this.pointer))}setRichContents(e,n){d(e,"string"),d(n,"string"),_._wasm_pdf_set_annot_rich_contents(this.pointer,b(e),Je(n))}getRichDefaults(){return v(_._wasm_pdf_annot_rich_defaults(this.pointer))}setRichDefaults(e){d(e,"string"),_._wasm_pdf_set_annot_rich_defaults(this.pointer,b(e))}setStampImage(e){_._wasm_pdf_set_annot_stamp_image(this.pointer,e.pointer)}setAppearanceFromDisplayList(e,n,t,i){k(t),d(i,ze),_._wasm_pdf_set_annot_appearance_from_display_list(this.pointer,Ne(e),Ge(n),T(t),i.pointer)}setAppearance(e,n,t,i,o,m){k(t),$(i),_._wasm_pdf_set_annot_appearance(this.pointer,Ne(e),Ge(n),T(t),W(i),this._doc._PDFOBJ(o),X(m))}applyRedaction(e=1,n=2,t=1,i=0){_._wasm_pdf_apply_redaction(this.pointer,e,n,t,i)}}x._drop=_._wasm_pdf_drop_annot;x.ANNOT_TYPES=["Text","Link","FreeText","Line","Square","Circle","Polygon","PolyLine","Highlight","Underline","Squiggly","StrikeOut","Redact","Stamp","Caret","Ink","Popup","FileAttachment","Sound","Movie","RichMedia","Widget","Screen","PrinterMark","TrapNet","Watermark","3D","Projection"];x.LINE_ENDING=["None","Square","Circle","Diamond","OpenArrow","ClosedArrow","Butt","ROpenArrow","RClosedArrow","Slash"];x.BORDER_STYLE=["Solid","Dashed","Beveled","Inset","Underline"];x.BORDER_EFFECT=["None","Cloudy"];x.INTENT=[null,"FreeTextCallout","FreeTextTypeWriter","LineArrow","LineDimension","PloyLine","PolygonCloud","PolygonDimension","StampImage","StampSnapshot"];x.IS_INVISIBLE=1;x.IS_HIDDEN=2;x.IS_PRINT=4;x.IS_NO_ZOOM=8;x.IS_NO_ROTATE=16;x.IS_NO_VIEW=32;x.IS_READ_ONLY=64;x.IS_LOCKED=128;x.IS_TOGGLE_NO_VIEW=256;x.IS_LOCKED_CONTENTS=512;class I extends x{getFieldType(){return I.WIDGET_TYPES[_._wasm_pdf_annot_field_type(this.pointer)]||"button"}isButton(){let e=this.getFieldType();return e==="button"||e==="checkbox"||e==="radiobutton"}isPushButton(){return this.getFieldType()==="button"}isCheckbox(){return this.getFieldType()==="checkbox"}isRadioButton(){return this.getFieldType()==="radiobutton"}isText(){return this.getFieldType()==="text"}isChoice(){let e=this.getFieldType();return e==="combobox"||e==="listbox"}isListBox(){return this.getFieldType()==="listbox"}isComboBox(){return this.getFieldType()==="combobox"}getFieldFlags(){return _._wasm_pdf_annot_field_flags(this.pointer)}isMultiline(){return(this.getFieldFlags()&I.TX_FIELD_IS_MULTILINE)!==0}isPassword(){return(this.getFieldFlags()&I.TX_FIELD_IS_PASSWORD)!==0}isComb(){return(this.getFieldFlags()&I.TX_FIELD_IS_COMB)!==0}isReadOnly(){return(this.getFieldFlags()&I.FIELD_IS_READ_ONLY)!==0}getLabel(){return v(_._wasm_pdf_annot_field_label(this.pointer))}getName(){return he(_._wasm_pdf_load_field_name(this.pointer))}getValue(){return v(_._wasm_pdf_annot_field_value(this.pointer))}setTextValue(e){return _._wasm_pdf_set_annot_text_field_value(this.pointer,b(e))}getMaxLen(){return _._wasm_pdf_annot_text_widget_max_len(this.pointer)}setChoiceValue(e){return _._wasm_pdf_set_annot_choice_field_value(this.pointer,b(e))}getOptions(e=!1){let n=[],t=_._wasm_pdf_annot_choice_field_option_count(this.pointer);for(let i=0;i<t;++i)n.push(v(_._wasm_pdf_annot_choice_field_option(this.pointer,e,i)));return n}toggle(){return _._wasm_pdf_toggle_widget(this.pointer)}}I.WIDGET_TYPES=["widget","button","checkbox","combobox","listbox","radiobutton","signature","text"];I.FIELD_IS_READ_ONLY=1;I.FIELD_IS_REQUIRED=2;I.FIELD_IS_NO_EXPORT=4;I.TX_FIELD_IS_MULTILINE=4096;I.TX_FIELD_IS_PASSWORD=8192;I.TX_FIELD_IS_COMB=1<<24;I.BTN_FIELD_IS_NO_TOGGLE_TO_OFF=16384;I.BTN_FIELD_IS_RADIO=32768;I.BTN_FIELD_IS_PUSHBUTTON=65536;I.CH_FIELD_IS_COMBO=1<<17;I.CH_FIELD_IS_EDIT=1<<18;I.CH_FIELD_IS_SORT=1<<19;I.CH_FIELD_IS_MULTI_SELECT=1<<21;var o_=0,Ce=new Map;globalThis.$libmupdf_stm_close=function(r){let e=Ce.get(r);if(e){e.close(),Ce.delete(r);return}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_seek=function(r,e,n,t){let i=Ce.get(r);if(i){if(t===0)return n;if(t===1)return e+n;if(t===2){let o=i.fileSize();return o<0?-1:o+n}throw new Error("invalid whence argument")}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_read=function(r,e,n,t){let i=Ce.get(r);if(i)return i.read(_.HEAPU8,n,t,e);throw new Error("invalid file handle")};class Dt extends O{constructor(e){let n=o_++;Ce.set(n,e),super(_._wasm_new_stream(n))}}Dt._drop=_._wasm_drop_stream;globalThis.$libmupdf_load_font_file=function(r,e,n,t){return 0};var p_=0,P=new Map,d_=0,ve=new Map,m_=0,Oe=new Map;globalThis.$libmupdf_path_walk={moveto(r,e,n){ve.get(r)?.moveTo?.(e,n)},lineto(r,e,n){ve.get(r)?.lineTo?.(e,n)},curveto(r,e,n,t,i,o,m){ve.get(r)?.curveTo?.(e,n,t,i,o,m)},closepath(r){ve.get(r)?.closePath?.()}};var Ae=null;globalThis.$libmupdf_text_walk={begin_span(r,e,n,t,i,o,m){e!==Ae?.pointer&&(Ae=new L(e)),Oe.get(r)?.beginSpan?.(Ae,B(n),t,i,o,v(m))},end_span(r){Oe.get(r)?.endSpan?.()},show_glyph(r,e,n,t,i,o,m){e!==Ae?.pointer&&(Ae=new L(e)),Oe.get(r)?.showGlyph?.(Ae,B(n),t,i,o,m)}};globalThis.$libmupdf_device={drop_device(r){P.get(r)?.drop?.(),P.delete(r)},close_device(r){P.get(r)?.close?.()},fill_path(r,e,n,t,i,o,m,w){P.get(r)?.fillPath?.(new pe(_._wasm_keep_path(e)),!!n,B(t),new E(_._wasm_keep_colorspace(i)),ke(o,m),w)},clip_path(r,e,n,t){P.get(r)?.clipPath?.(new pe(_._wasm_keep_path(e)),!!n,B(t))},stroke_path(r,e,n,t,i,o,m,w){P.get(r)?.strokePath?.(new pe(_._wasm_keep_path(e)),new j(_._wasm_keep_stroke_state(n)),B(t),new E(_._wasm_keep_colorspace(i)),ke(o,m),w)},clip_stroke_path(r,e,n,t){P.get(r)?.clipStrokePath?.(new pe(_._wasm_keep_path(e)),new j(_._wasm_keep_stroke_state(n)),B(t))},fill_text(r,e,n,t,i,o,m){P.get(r)?.fillText?.(new _e(_._wasm_keep_text(e)),B(n),new E(_._wasm_keep_colorspace(t)),ke(i,o),m)},stroke_text(r,e,n,t,i,o,m,w){P.get(r)?.strokeText?.(new _e(_._wasm_keep_text(e)),new j(_._wasm_keep_stroke_state(n)),B(t),new E(_._wasm_keep_colorspace(i)),ke(o,m),w)},clip_text(r,e,n){P.get(r)?.clipText?.(new _e(_._wasm_keep_text(e)),B(n))},clip_stroke_text(r,e,n,t){P.get(r)?.clipStrokeText?.(new _e(_._wasm_keep_text(e)),new j(_._wasm_keep_stroke_state(n)),B(t))},ignore_text(r,e,n){P.get(r)?.ignoreText?.(new _e(_._wasm_keep_text(e)),B(n))},fill_shade(r,e,n,t){P.get(r)?.fillShade?.(new _t(e),B(n),t)},fill_image(r,e,n,t){P.get(r)?.fillImage?.(new te(e),B(n),t)},fill_image_mask(r,e,n,t,i,o,m){P.get(r)?.fillImageMask?.(new te(e),B(n),new E(_._wasm_keep_colorspace(t)),ke(i,o),m)},clip_image_mask(r,e,n){P.get(r)?.clipImageMask?.(new te(e),B(n))},pop_clip(r){P.get(r)?.popClip?.()},begin_mask(r,e,n,t,i,o){P.get(r)?.beginMask?.(G(e),!!n,new E(_._wasm_keep_colorspace(t)),ke(i,o))},begin_group(r,e,n,t,i,o,m){P.get(r)?.beginGroup?.(G(e),new E(_._wasm_keep_colorspace(n)),!!t,!!i,Q.BLEND_MODES[o],m)},begin_tile(r,e,n,t,i,o,m){return P.get(r)?.beginTile?.(G(e),G(n),t,i,B(o),m)||0},begin_layer(r,e){P.get(r)?.beginLayer?.(v(e))},end_mask(r){P.get(r)?.endMask?.()},end_group(r){P.get(r)?.endGroup?.()},end_tile(r){P.get(r)?.endTile?.()},end_layer(r){P.get(r)?.endLayer?.()}};const l_={Document:D};function kt(r){const e=r||"",n=e.match(/font-size:\s*([\d.]+)pt/i),t=n?parseFloat(n[1]):0,i=e.match(/font-weight:\s*(bold|\d+)/i),o=i&&(i[1]==="bold"||parseInt(i[1])>=600),w=!!e.match(/font-style:\s*italic/i);return{fontSize:t,isBold:o,isItalic:w}}function Ot(r){let e=0,n=!1;const t=r.getAttribute("style")||"",i=kt(t);e=Math.max(e,i.fontSize),n=n||i.isBold,r.querySelectorAll("b, strong").length>0&&(n=!0);const m=r.querySelectorAll("*");for(const w of m){const g=w.getAttribute("style")||"",h=kt(g);e=Math.max(e,h.fontSize),(h.isBold||w.tagName.toLowerCase()==="b"||w.tagName.toLowerCase()==="strong")&&(n=!0)}return{fontSize:e,isBold:n}}function f_(r,e,n){return e>14||e>12&&n||n&&r.length<200&&!r.includes(".")&&!r.match(/^\d+\./)||e>16&&r.length<300}function w_(r,e){return r>20?1:r>18||r>16?2:(r>14||e&&r>12,3)}function Z(r,e,n=0,t=[]){return{type:r,content:e,level:n,images:t}}function u_(r,e,n){let t=r.parentElement;for(;t&&t!==n;){if(e.has(t))return!0;t=t.parentElement}return!1}function c_(r){const e=r.firstElementChild;if(!e)return null;const n=e.tagName.toLowerCase(),{fontSize:t,isBold:i}=Ot(r),o=e.textContent.trim();if(!o)return null;const m=n.match(/^h[1-6]$/),w=t&&t>14||i&&o.length<200;if(!m&&!w)return null;let g=3;m?g=parseInt(n.charAt(1)):t>18?g=1:t>16&&(g=2);const h=r.cloneNode(!0),N=h.firstElementChild;N&&N.textContent.trim()===o&&N.remove();const S=h.textContent.trim();return{heading:Z("heading",o,g),remainingText:S}}function h_(r,e){const n=r.getAttribute("src");return n?(e.add(r),Z("image","",0,[{src:n}])):null}function g_(r,e){const n=r.textContent.trim();if(!n)return null;const t=r.tagName.toLowerCase(),i=parseInt(t.charAt(1));return e.add(r),Z("heading",n,i)}function b_(r,e,n){const t=r.textContent.trim();if(!t)return null;const{fontSize:i,isBold:o}=Ot(r);if(e==="p"||e==="div"){const m=c_(r);if(m){n.add(r);const w=[m.heading];return m.remainingText&&w.push(Z("paragraph",m.remainingText)),w}}if(f_(t,i,o)){const m=w_(i,o);return n.add(r),Z("heading",t,m)}return e==="p"||e==="div"||e==="span"&&t.length>50?(n.add(r),Z("paragraph",t)):null}function At(r){return r.replace(/(\w{2,})-\s*\n?\s*([a-z])/g,"$1$2")}function y_(r){const e=[];for(let n=0;n<r.length;n++){const t=r[n],i=r[n+1];if(t.content&&(t.content=At(t.content)),t.type==="paragraph"&&i&&i.type==="paragraph"){const o=t.content.trim(),m=i.content.trim();if(o.endsWith("-")&&m.length>0&&m[0].toLowerCase()===m[0]){const w=o.slice(0,-1)+m;e.push(Z("paragraph",At(w))),n++;continue}}e.push(t)}return e}function E_(r){let e=[...r],n=!0;for(;n;){n=!1;const t=[];for(let i=0;i<e.length;i++){const o=e[i],m=e[i+1];if(o.type==="paragraph"&&m&&m.type==="paragraph"){const w=o.content.trim(),g=m.content.trim();if(!g){t.push(o);continue}const h=!!w.match(/[.!?]$/),N=g[0]&&g[0].toLowerCase()===g[0],S=w.endsWith("-"),me=w.length<100&&!h;if(!h&&N||S||me&&N){t.push(Z("paragraph",`${o.content} ${m.content}`)),i++,n=!0;continue}}t.push(o)}e=t}return e}function x_(r){const e=[];for(let n=0;n<r.length;n++){const t=r[n],i=r[n+1];if(t.type==="heading"&&i&&i.type==="paragraph"){const o=i.content.trim(),m=t.content.trim(),w=o.split(`
`)[0].trim();if(w.length<50&&(w.match(/^(of|and|the|a|an|in|on|at|to|for|with|by)\s/i)||!w.match(/^[A-Z]/)&&w.length<30)&&!m.match(/[.!?]$/)){e.push(Z("heading",`${t.content} ${w}`,t.level,[]));const h=o.split(`
`).slice(1).join(`
`).trim();h&&e.push(Z("paragraph",h)),n++;continue}}t.type==="heading"&&i&&i.type==="heading"&&t.level===i.level?(e.push(Z("heading",`${t.content} ${i.content}`,t.level,[])),n++):e.push(t)}return e}function T_(r){if(r.tagName.toLowerCase()!=="div")return!1;const n=r.getAttribute("id")||"";return/^page\d+$/.test(n)}function k_(r){const e=document.createElement("div");e.innerHTML=r;const n=[],t=new Set,i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);let o;for(;o=i.nextNode();){const w=o,g=w.tagName.toLowerCase();if(!t.has(w)&&!T_(w)&&!u_(w,t,e)){if(g==="img"){const h=h_(w,t);h&&n.push(h);continue}if(g.match(/^h[1-6]$/)){const h=g_(w,t);h&&n.push(h);continue}if(g.match(/^(p|div|span)$/)){const h=b_(w,g,t);h&&(Array.isArray(h)?n.push(...h):n.push(h))}}}let m=y_(n);return m=E_(m),x_(m)}function vt(r){const e=document.createElement("div");return e.textContent=r,e.innerHTML}function A_(r){if(!r.content&&r.images.length===0)return"";let e="";if(r.type==="heading"){const n=`h${Math.min(r.level||2,6)}`;e+=`<${n}>${vt(r.content)}</${n}>`}else if(r.type==="image")for(const n of r.images)n&&n.src&&(e+=`<img src="${n.src}" alt="" />`);else if(r.content.trim()){e+=`<p>${vt(r.content)}</p>`;for(const n of r.images)n&&n.src&&(e+=`<img src="${n.src}" alt="" />`)}return e}function v_(r){return r.map(A_).join("")}const P_=document.getElementById("file-input"),nt=document.getElementById("pdf-container"),st=document.getElementById("loading"),et=document.getElementById("error");function F_(r){et.textContent=r,et.classList.remove("hidden"),st.classList.add("hidden")}function S_(){et.classList.add("hidden")}function L_(){st.classList.remove("hidden"),S_()}function I_(){st.classList.add("hidden")}function D_(){nt.innerHTML=""}function O_(){return{width:nt.getBoundingClientRect().width||window.innerWidth,height:window.innerHeight,emSize:12}}function N_(r){return l_.Document.openDocument(r,"application/pdf")}function C_(r,e,n,t){try{r.layout(e,n,t)}catch{throw new Error("This PDF is not reflowable. Reflow mode requires a tagged PDF.")}}function R_(r){const e=r.countPages(),n=[];for(let t=0;t<e;t++){const m=r.loadPage(t).toStructuredText("preserve-images").asHTML(t),w=k_(m);n.push(...w)}return n}async function B_(r){const e=await r.arrayBuffer(),n=new Uint8Array(e),t=N_(n),{width:i,height:o,emSize:m}=O_();C_(t,i,o,m);const w=R_(t);return v_(w)}async function Nt(r){L_(),D_();try{const e=await B_(r);nt.innerHTML=e,I_()}catch(e){console.error("Error loading PDF:",e),F_(`Failed to load PDF: ${e.message}`)}}async function H_(){try{const r=await fetch("/1807.05520v2.pdf");if(!r.ok)return;const e=await r.blob(),n=new File([e],"1807.05520v2.pdf",{type:"application/pdf"});await Nt(n)}catch(r){console.error("Could not load test PDF:",r)}}function M_(r){const e=r.target.files[0];e&&e.type==="application/pdf"&&Nt(e)}P_.addEventListener("change",M_);H_();
